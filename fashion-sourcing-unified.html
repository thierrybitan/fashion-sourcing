<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fashion Sourcing – Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700&family=Archivo+Narrow:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --purple: #7B6FD0; --purple-light: #9B8FE8; --purple-dark: #5A50A8;
  --purple-bg: #EEE9FF; --gray-100: #F7F7FB; --gray-200: #EEECF8;
  --gray-300: #D8D6EC; --gray-400: #BBBBCC; --gray-600: #888899;
  --gray-800: #333344; --green: #2ECC8A; --green-bg: #E8FBF3;
  --orange: #F39C12; --red: #E74C3C; --sidebar-w: 220px; --header-h: 60px;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Archivo', sans-serif; background: var(--gray-100); color: var(--gray-800); height: 100vh; overflow: hidden; }

/* ── HEADER ── */
header { height: var(--header-h); background: linear-gradient(135deg, #6B21D4 0%, #8B3FE0 50%, #7B2FBE 100%); display: flex; align-items: center; padding: 0 20px; gap: 20px; position: fixed; top: 0; left: 0; right: 0; z-index: 200; }
.logo { font-family: 'Archivo Narrow', sans-serif; font-weight: 600; font-size: 13px; letter-spacing: 0.12em; color: white; text-transform: uppercase; width: var(--sidebar-w); display: flex; align-items: center; gap: 10px; flex-shrink: 0; }
.logo-icon { width: 28px; height: 28px; cursor: pointer; }
.header-search { flex: 1; background: white; border-radius: 6px; height: 38px; display: flex; align-items: center; padding: 0 14px; gap: 10px; max-width: 680px; margin: 0 auto; }
.header-search input { border: none; outline: none; font-family: 'Archivo', sans-serif; font-size: 13px; color: var(--gray-800); flex: 1; background: transparent; }
.header-user { display: flex; align-items: center; gap: 10px; margin-left: auto; }
.user-logo { background: black; color: white; font-size: 11px; font-weight: 700; padding: 5px 10px; border-radius: 4px; }
.user-name { color: white; font-size: 12px; font-weight: 500; letter-spacing: 0.05em; text-transform: uppercase; }

/* ── SIDEBAR ── */
aside { position: fixed; top: var(--header-h); left: 0; bottom: 0; width: var(--sidebar-w); background: white; border-right: 1px solid var(--gray-200); overflow-y: auto; z-index: 100; }
.nav-item { display: flex; align-items: center; gap: 11px; padding: 8px 18px; font-size: 11px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; transition: color 0.15s, background 0.15s; position: relative; }
.nav-item:hover { color: var(--purple); background: var(--purple-bg); }
.nav-item.active { color: var(--purple); background: var(--purple-bg); }
.nav-item.active::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: var(--purple); border-radius: 0 2px 2px 0; }
.nav-icon { width: 16px; height: 16px; flex-shrink: 0; opacity: 0.7; }
.nav-arrow { margin-left: auto; font-size: 9px; }
.nav-sub { overflow: hidden; transition: max-height 0.2s; }
.nav-sub-item { font-size: 10px; font-weight: 500; letter-spacing: 0.06em; text-transform: uppercase; color: var(--gray-400); padding: 4px 0 4px 46px; cursor: pointer; transition: color 0.15s; display: block; }
.nav-sub-item:hover, .nav-sub-item.active { color: var(--purple); }

/* ── MAIN ── */
main { margin-left: var(--sidebar-w); margin-top: var(--header-h); height: calc(100vh - var(--header-h)); overflow-y: auto; }
.module { display: none; }
.module.active { display: block; }

/* ═══════════════════════════════
   SHARED COMPONENTS
═══════════════════════════════ */
.page-header { background: white; border-radius: 8px; padding: 18px; text-align: center; font-size: 17px; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase; margin: 24px 32px 20px; }
.filter-btn { display: flex; align-items: center; gap: 7px; padding: 8px 14px; border: 1.5px solid var(--gray-200); border-radius: 6px; background: white; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-800); cursor: pointer; transition: border-color 0.15s; position: relative; }
.filter-btn:hover { border-color: var(--purple); color: var(--purple); }
.keyword-input { flex: 1; min-width: 150px; padding: 8px 14px; border: 1.5px solid var(--gray-200); border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; outline: none; color: var(--gray-600); }
.keyword-input:focus { border-color: var(--purple); }
.btn-search { padding: 8px 20px; background: var(--purple); color: white; border: none; border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; }
.btn-reset { padding: 8px 20px; background: white; color: var(--gray-600); border: 1.5px solid var(--gray-200); border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; }
.btn-reset:hover { border-color: var(--purple); color: var(--purple); }
.filters-bar { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; margin-bottom: 10px; }
.search-actions { display: flex; gap: 10px; justify-content: center; margin: 12px 0; }
.results-count { font-size: 11px; font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase; color: var(--purple); margin-bottom: 14px; }
.pagination { display: flex; align-items: center; justify-content: space-between; margin-top: 20px; font-size: 10.5px; color: var(--gray-400); }
.pagination-pages { display: flex; align-items: center; gap: 5px; }
.page-num { width: 26px; height: 26px; display: flex; align-items: center; justify-content: center; border-radius: 4px; font-weight: 600; font-size: 11px; cursor: pointer; }
.page-num.active { background: var(--purple); color: white; }
.page-num:hover:not(.active) { background: var(--purple-bg); color: var(--purple); }
.page-arrow { width: 26px; height: 26px; display: flex; align-items: center; justify-content: center; border: 1.5px solid var(--gray-200); border-radius: 4px; cursor: pointer; font-size: 12px; color: var(--gray-400); }
.page-arrow:hover { border-color: var(--purple); color: var(--purple); }
.btn-back { padding: 9px 20px; border: 1.5px solid var(--gray-200); border-radius: 6px; background: white; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; margin-bottom: 16px; display: inline-block; }
.btn-back:hover { border-color: var(--purple); color: var(--purple); }
.dropdown-wrapper { position: relative; }
.dropdown-menu { display: none; position: absolute; top: calc(100% + 5px); left: 0; background: white; border: 1.5px solid var(--gray-200); border-radius: 8px; box-shadow: 0 8px 28px rgba(0,0,0,0.1); z-index: 300; min-width: 190px; }
.dropdown-menu.open { display: block; }
.dropdown-item { padding: 8px 14px; font-size: 10.5px; font-weight: 500; letter-spacing: 0.05em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; }
.dropdown-item:hover { background: var(--purple-bg); color: var(--purple); }
.card-tag { font-size: 8.5px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; padding: 3px 7px; border-radius: 3px; background: var(--purple-bg); color: var(--purple); }
.card-tag.green { background: var(--green-bg); color: #1a9965; }
.badge { font-size: 8px; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; padding: 3px 7px; border-radius: 3px; }
.badge-green { background: var(--green); color: white; }
.badge-purple { background: var(--purple); color: white; }
.section-card { background: white; border-radius: 10px; padding: 18px 20px; }
.section-title { font-size: 9.5px; font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase; color: var(--purple); margin-bottom: 14px; padding-bottom: 8px; border-bottom: 1px solid var(--gray-200); }
.info-row { display: flex; justify-content: space-between; align-items: center; padding: 7px 0; border-bottom: 1px solid var(--gray-200); }
.info-row:last-child { border-bottom: none; }
.info-label { font-size: 9.5px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-400); }
.info-value { font-size: 11px; font-weight: 600; color: var(--gray-800); text-align: right; max-width: 55%; }

/* ═══════════════════════════════
   MODULE: DASHBOARD
═══════════════════════════════ */
#mod-dashboard { padding: 32px; }
.dash-welcome { font-size: 20px; font-weight: 700; color: var(--gray-800); margin-bottom: 6px; }
.dash-sub { font-size: 13px; color: var(--gray-600); margin-bottom: 28px; }
.dash-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px; }
.dash-card { background: white; border-radius: 10px; padding: 20px; cursor: pointer; transition: box-shadow 0.2s, transform 0.2s; border: 1.5px solid transparent; }
.dash-card:hover { box-shadow: 0 8px 24px rgba(123,111,208,0.12); transform: translateY(-2px); border-color: var(--purple-bg); }
.dash-card-icon { font-size: 28px; margin-bottom: 12px; }
.dash-card-title { font-size: 12px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: var(--gray-800); margin-bottom: 5px; }
.dash-card-desc { font-size: 11px; color: var(--gray-600); line-height: 1.5; margin-bottom: 12px; }
.dash-card-stat { font-size: 22px; font-weight: 700; color: var(--purple); }
.dash-card-stat-label { font-size: 9px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-400); }
.dash-row { display: grid; grid-template-columns: 2fr 1fr; gap: 16px; }
.dash-activity { background: white; border-radius: 10px; padding: 20px; }
.activity-title { font-size: 11px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: var(--gray-800); margin-bottom: 16px; }
.activity-item { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--gray-200); }
.activity-item:last-child { border-bottom: none; }
.activity-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--purple); flex-shrink: 0; }
.activity-dot.green { background: var(--green); }
.activity-dot.orange { background: var(--orange); }
.activity-text { font-size: 11.5px; color: var(--gray-600); flex: 1; }
.activity-time { font-size: 10px; color: var(--gray-400); font-weight: 500; }
.dash-quick { background: white; border-radius: 10px; padding: 20px; }
.quick-btn { width: 100%; padding: 10px 14px; margin-bottom: 8px; border: 1.5px solid var(--gray-200); border-radius: 6px; background: white; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-800); cursor: pointer; text-align: left; transition: border-color 0.15s, color 0.15s; }
.quick-btn:hover { border-color: var(--purple); color: var(--purple); }
.quick-btn:last-child { margin-bottom: 0; }

/* ═══════════════════════════════
   MODULE: JOB
═══════════════════════════════ */
#mod-job { padding: 0 32px 32px; }
.job-view { display: none; }
.job-view.active { display: block; }
.cards-grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px; }
.company-card { border-radius: 10px; overflow: hidden; position: relative; height: 130px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
.company-card:hover { transform: translateY(-3px); box-shadow: 0 10px 28px rgba(0,0,0,0.18); }
.company-card img { width: 100%; height: 100%; object-fit: cover; }
.company-card-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.65) 0%, transparent 60%); display: flex; flex-direction: column; justify-content: flex-end; padding: 12px 14px 8px; }
.company-name { color: white; font-size: 13px; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; }
.company-jobs { color: rgba(255,255,255,0.85); font-size: 10px; font-weight: 500; margin-top: 2px; }
.bottom-actions { display: flex; gap: 12px; justify-content: center; margin-top: 8px; }
.btn-outline { padding: 10px 24px; border: 1.5px solid var(--purple); border-radius: 6px; color: var(--purple); background: white; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; transition: background 0.15s; }
.btn-outline:hover { background: var(--purple); color: white; }
.job-list { display: flex; flex-direction: column; gap: 2px; }
.job-item { display: flex; align-items: center; gap: 14px; background: white; padding: 12px 16px; border-radius: 6px; cursor: pointer; transition: box-shadow 0.15s; border: 1px solid transparent; }
.job-item:hover { box-shadow: 0 2px 12px rgba(0,0,0,0.07); border-color: var(--purple-bg); }
.job-logo { width: 40px; height: 40px; border: 1px solid var(--gray-200); border-radius: 6px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-weight: 700; font-size: 10px; color: var(--purple); background: var(--purple-bg); }
.job-info { flex: 1; }
.job-title-link { font-size: 12px; font-weight: 600; color: var(--purple); letter-spacing: 0.03em; text-transform: uppercase; margin-bottom: 3px; }
.job-co { font-size: 10.5px; font-weight: 600; color: var(--gray-600); letter-spacing: 0.05em; text-transform: uppercase; margin-bottom: 2px; }
.job-meta { font-size: 9.5px; color: var(--gray-400); letter-spacing: 0.03em; text-transform: uppercase; font-weight: 500; }
.active-tag { display: inline-flex; align-items: center; gap: 5px; background: var(--purple-bg); color: var(--purple); padding: 4px 10px; border-radius: 4px; font-size: 9.5px; font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase; }
.active-tag span { cursor: pointer; font-size: 12px; }
/* Detail */
.job-detail-title { background: white; border-radius: 8px; padding: 18px; text-align: center; font-size: 15px; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 16px; }
.job-detail-grid { display: grid; grid-template-columns: 260px 1fr; gap: 16px; margin-bottom: 16px; }
.detail-field { margin-bottom: 11px; }
.detail-field-label { font-size: 9px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: var(--gray-400); margin-bottom: 2px; }
.detail-field-value { font-size: 10.5px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: var(--gray-800); }
.detail-desc { font-size: 11.5px; line-height: 1.7; color: var(--gray-600); }
.detail-desc p+p { margin-top: 10px; }
.detail-card-title { font-size: 9.5px; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); margin-bottom: 12px; }
    .detail-desc { font-size: 13px; line-height: 1.7; color: var(--gray-600); }
    .detail-desc p { margin-bottom: 14px; }
    .detail-desc p:last-child { margin-bottom: 0; }
    .candidate-list { padding-left: 18px; margin: 8px 0 0; }
    .candidate-list li { font-size: 13px; line-height: 1.7; color: var(--gray-600); margin-bottom: 6px; }
    .job-detail-title { font-size: 18px; font-weight: 800; letter-spacing: 0.1em; text-transform: uppercase; color: var(--gray-800); }
.candidate-list { list-style: none; }
.candidate-list li { padding: 4px 0 4px 14px; position: relative; font-size: 11.5px; color: var(--gray-600); line-height: 1.5; }
.candidate-list li::before { content: '•'; position: absolute; left: 0; color: var(--purple); }
.btn-apply { background: var(--purple); color: white; border: none; border-radius: 6px; padding: 9px 20px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; }
.btn-apply:hover { background: var(--purple-dark); }
.advanced-toggle { display: flex; align-items: center; gap: 7px; font-size: 10.5px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; margin-bottom: 12px; }
.adv-toggle-icon { width: 18px; height: 18px; border: 1.5px solid currentColor; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 400; }
.adv-filters { display: none; gap: 10px; flex-wrap: wrap; margin-bottom: 12px; }
.adv-filters.open { display: flex; }

/* ═══════════════════════════════
   MODULE: SEARCH (Module 1)
═══════════════════════════════ */
#mod-search { padding: 0 32px 32px; }
.search-view { display: none; }
.search-view.active { display: block; }
.tab-nav { display: flex; gap: 0; border: 1.5px solid var(--gray-200); border-radius: 8px; overflow: hidden; margin-bottom: 20px; background: white; }
.tab-btn { flex: 1; padding: 10px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; border: none; background: white; color: var(--gray-600); cursor: pointer; transition: background 0.15s; border-right: 1px solid var(--gray-200); }
.tab-btn:last-child { border-right: none; }
.tab-btn.active { background: var(--purple); color: white; }
.tab-btn:hover:not(.active) { background: var(--purple-bg); color: var(--purple); }
.search-box { background: white; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
.sup-cards-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
.supplier-card { background: white; border-radius: 10px; overflow: hidden; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; border: 1.5px solid transparent; }
.supplier-card:hover { transform: translateY(-3px); box-shadow: 0 10px 28px rgba(0,0,0,0.09); border-color: var(--purple-bg); }
.card-cover { height: 160px; position: relative; overflow: hidden; }
.card-cover img { width: 100%; height: 100%; object-fit: cover; }
.card-cover-overlay { position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.05), rgba(0,0,0,0.4)); }
.card-badges { position: absolute; top: 8px; right: 8px; display: flex; gap: 3px; flex-wrap: wrap; justify-content: flex-end; }
.card-logo-sm { position: absolute; bottom: -16px; left: 14px; width: 34px; height: 34px; border-radius: 7px; background: white; border: 2px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 10px; color: var(--purple); }
.card-body { padding: 22px 14px 12px; }
.card-name { font-size: 12px; font-weight: 700; color: var(--gray-800); letter-spacing: 0.04em; text-transform: uppercase; margin-bottom: 3px; }
.card-location { font-size: 10px; color: var(--gray-400); font-weight: 500; margin-bottom: 8px; }
.card-tags-row { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 8px; }
.card-stats { display: flex; gap: 0; border-top: 1px solid var(--gray-200); padding-top: 8px; margin-top: 8px; }
.card-stat { flex: 1; text-align: center; }
.card-stat + .card-stat { border-left: 1px solid var(--gray-200); }
.stat-value { font-size: 12px; font-weight: 700; color: var(--gray-800); }
.stat-label { font-size: 8.5px; font-weight: 500; letter-spacing: 0.04em; text-transform: uppercase; color: var(--gray-400); margin-top: 1px; }
/* Profile */
.profile-header { background: white; border-radius: 10px; overflow: hidden; margin-bottom: 18px; }
.profile-cover { height: 160px; position: relative; }
.profile-cover img { width: 100%; height: 100%; object-fit: cover; }
.profile-cover-overlay { position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.05), rgba(0,0,0,0.5)); }
.profile-cover-badges { position: absolute; top: 14px; right: 14px; display: flex; gap: 5px; }
.profile-logo-wrap { position: absolute; bottom: -26px; left: 26px; width: 56px; height: 56px; border-radius: 10px; background: white; border: 3px solid white; box-shadow: 0 4px 14px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; color: var(--purple); }
.profile-info { padding: 34px 26px 20px; }
.profile-name { font-size: 17px; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; color: var(--gray-800); margin-bottom: 5px; }
.profile-meta { font-size: 10.5px; color: var(--gray-400); margin-bottom: 12px; }
.profile-tags-row { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 12px; }
.profile-actions { display: flex; gap: 8px; }
.btn-contact { padding: 9px 18px; background: var(--purple); color: white; border: none; border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; }
.btn-wishlist { padding: 9px 18px; background: white; color: var(--purple); border: 1.5px solid var(--purple); border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; }
.profile-tabs { display: flex; gap: 0; border-bottom: 2px solid var(--gray-200); margin-bottom: 18px; }
.ptab { padding: 9px 18px; font-size: 10.5px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-400); cursor: pointer; border-bottom: 2px solid transparent; margin-bottom: -2px; transition: color 0.15s; }
.ptab.active { color: var(--purple); border-bottom-color: var(--purple); }
.profile-tab-content { display: none; }
.profile-tab-content.active { display: block; }
.profile-2col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
.profile-3col { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 14px; margin-bottom: 16px; }
.big-stat { text-align: center; padding: 14px 10px; }
.big-stat-value { font-size: 24px; font-weight: 700; color: var(--gray-800); }
.big-stat-label { font-size: 9px; font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase; color: var(--gray-400); margin-top: 3px; }
.catalog-grid4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px; }
.catalog-item { background: white; border-radius: 8px; overflow: hidden; }
.catalog-img { height: 88px; overflow: hidden; }
.catalog-img img { width: 100%; height: 100%; object-fit: cover; }
.catalog-info { padding: 8px 10px; }
.catalog-name { font-size: 10.5px; font-weight: 600; color: var(--gray-800); margin-bottom: 2px; }
.catalog-ref { font-size: 9px; color: var(--gray-400); font-weight: 500; }
.machines-table { width: 100%; border-collapse: collapse; }
.machines-table th { font-size: 9px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: var(--gray-400); padding: 7px 10px; text-align: left; border-bottom: 1.5px solid var(--gray-200); }
.machines-table td { font-size: 10.5px; color: var(--gray-800); padding: 9px 10px; border-bottom: 1px solid var(--gray-200); font-weight: 500; }
.machines-table tr:last-child td { border-bottom: none; }
.clients-grid5 { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
.client-item { background: var(--gray-100); border-radius: 7px; padding: 10px; display: flex; flex-direction: column; align-items: center; gap: 5px; }
.client-logo-ph { width: 36px; height: 36px; border-radius: 5px; background: var(--purple-bg); display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 700; color: var(--purple); }
.client-name { font-size: 8.5px; font-weight: 600; letter-spacing: 0.04em; text-transform: uppercase; color: var(--gray-600); text-align: center; }
.sustain-grid3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 16px; }
.sustain-item { background: var(--green-bg); border-radius: 8px; padding: 14px; display: flex; flex-direction: column; gap: 6px; }
.sustain-icon { font-size: 20px; }
.sustain-title { font-size: 10.5px; font-weight: 700; letter-spacing: 0.04em; text-transform: uppercase; color: #1a9965; }
.sustain-desc { font-size: 10.5px; color: var(--gray-600); line-height: 1.5; }
.progress-bar { height: 5px; background: var(--gray-200); border-radius: 3px; overflow: hidden; margin-top: 3px; }
.progress-fill { height: 100%; background: var(--green); border-radius: 3px; }
.freelance-card { background: white; border-radius: 10px; padding: 16px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; border: 1.5px solid transparent; display: flex; gap: 12px; }
.freelance-card:hover { transform: translateY(-2px); box-shadow: 0 8px 22px rgba(0,0,0,0.07); border-color: var(--purple-bg); }
.freelance-avatar { width: 50px; height: 50px; border-radius: 50%; background: var(--purple-bg); display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 700; color: var(--purple); flex-shrink: 0; overflow: hidden; }
.freelance-avatar img { width: 100%; height: 100%; object-fit: cover; }
.freelance-name { font-size: 12px; font-weight: 700; color: var(--gray-800); margin-bottom: 2px; }
.freelance-title-role { font-size: 10.5px; color: var(--gray-600); margin-bottom: 5px; }
.freelance-rate { font-size: 11.5px; font-weight: 700; color: var(--purple); }
.avail-dot { display: inline-block; width: 6px; height: 6px; border-radius: 50%; margin-right: 4px; }
.avail-dot.green { background: var(--green); }
.avail-dot.red { background: var(--red); }
.freelance-grid2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; }
.brand-card { background: white; border-radius: 10px; overflow: hidden; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; border: 1.5px solid transparent; }
.brand-card:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(0,0,0,0.09); border-color: var(--purple-bg); }
.brand-cover { height: 80px; overflow: hidden; }
.brand-cover img { width: 100%; height: 100%; object-fit: cover; }
.brand-body { padding: 12px 14px; }
.brand-name { font-size: 12px; font-weight: 700; color: var(--gray-800); letter-spacing: 0.05em; text-transform: uppercase; margin-bottom: 2px; }
.brand-segment { font-size: 9.5px; color: var(--gray-400); margin-bottom: 7px; }
.brand-stats-row { display: flex; gap: 14px; padding-top: 8px; border-top: 1px solid var(--gray-200); }
.brand-stat-val { font-size: 11px; font-weight: 700; color: var(--gray-800); }
.brand-stat-lbl { font-size: 8.5px; color: var(--gray-400); letter-spacing: 0.04em; text-transform: uppercase; }

/* ═══════════════════════════════
   MODULE: MAPPING
═══════════════════════════════ */
#mod-mapping { height: calc(100vh - var(--header-h)); display: none; flex-direction: column; overflow: hidden; }
#mod-mapping.active { display: flex; }
#map-leaflet-container { flex: 1; min-height: 400px; }
#leaflet-map { width: 100%; height: 100%; }
.map-page-title { background: white; text-align: center; font-size: 17px; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase; padding: 18px; border-bottom: 1px solid var(--gray-200); flex-shrink: 0; }
.map-filters-wrap { background: white; border-bottom: 1px solid var(--gray-200); padding: 12px 20px; flex-shrink: 0; }
.map-filter-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; flex-wrap: wrap; }
.map-filter-row:last-child { margin-bottom: 0; }
.map-filter-toggle { display: flex; align-items: center; gap: 6px; font-size: 10.5px; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; white-space: nowrap; flex-shrink: 0; }
.map-filter-toggle-icon { width: 18px; height: 18px; border: 1.5px solid currentColor; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 400; line-height: 1; }
.map-select-filter { appearance: none; padding: 7px 28px 7px 12px; border: 1.5px solid var(--gray-300); border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 500; color: var(--gray-600); background: white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23BBBBCC'/%3E%3C/svg%3E") no-repeat right 9px center; cursor: pointer; outline: none; min-width: 130px; }
.map-select-filter:focus { border-color: var(--purple); }
.map-btn-reset { padding: 7px 16px; background: var(--purple); color: white; border: none; border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.07em; text-transform: uppercase; cursor: pointer; margin-left: auto; }
/* Map area */
.map-area { flex: 1; position: relative; background: #EBEBEB; overflow: hidden; }
.map-inner { width: 100%; height: 100%; position: relative; cursor: grab; user-select: none; overflow: hidden; }
.map-inner:active { cursor: grabbing; }
.map-inner svg { display: block; }
/* Pins */
.mpin { position: absolute; transform: translate(-50%, -100%); cursor: pointer; z-index: 20; pointer-events: all; }
.mpin:hover { z-index: 40; }
.mpin-icon { display: flex; flex-direction: column; align-items: center; transition: transform 0.18s; }
.mpin:hover .mpin-icon { transform: scale(1.15); }
.mpin-circle { width: 28px; height: 28px; border-radius: 50%; background: var(--purple); display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 10px rgba(123,111,208,0.5); }
.mpin-circle svg { width: 14px; height: 14px; }
.mpin-tail { width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 9px solid var(--purple); margin: 0 auto; }
/* Tooltip on hover */
.mpin-tooltip { position: absolute; bottom: calc(100% + 4px); left: 50%; transform: translateX(-50%); background: white; border: 1.5px solid var(--gray-200); border-radius: 8px; padding: 10px 13px; min-width: 175px; box-shadow: 0 6px 20px rgba(0,0,0,0.14); display: none; z-index: 60; pointer-events: none; }
.mpin:hover .mpin-tooltip { display: block; pointer-events: auto; }
.mpin-tooltip::after { content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-top-color: white; }
.mtt-name { font-size: 11px; font-weight: 700; letter-spacing: 0.04em; text-transform: uppercase; color: var(--gray-800); margin-bottom: 2px; }
.mtt-loc { font-size: 9.5px; color: var(--gray-400); font-weight: 500; margin-bottom: 6px; }
.mtt-tags { display: flex; gap: 3px; flex-wrap: wrap; margin-bottom: 7px; }
.mtt-btn { font-size: 9px; font-weight: 700; letter-spacing: 0.07em; text-transform: uppercase; color: white; background: var(--purple); border: none; border-radius: 4px; padding: 4px 10px; cursor: pointer; font-family: inherit; width: 100%; }
.mtt-btn:hover { background: var(--purple-dark); }
/* Zoom controls */
.map-zoom-ctrl { position: absolute; bottom: 20px; right: 20px; display: flex; flex-direction: column; border: 1.5px solid var(--gray-300); border-radius: 6px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 30; }
.mzoom-btn { width: 32px; height: 32px; background: white; border: none; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px; font-weight: 300; color: var(--gray-800); font-family: inherit; transition: background 0.12s; }
.mzoom-btn:first-child { border-bottom: 1px solid var(--gray-200); }
.mzoom-btn:hover { background: var(--purple-bg); color: var(--purple); }

/* ═══════════════════════════════
   MODULE: STOCK (Module 4)
═══════════════════════════════ */
#mod-stock { }
.stock-view { display: none; }
.stock-view.active { display: block; }
.stock-filter-section { background: white; margin: 0 24px 0; border-radius: 10px 10px 0 0; padding: 14px 18px; border-bottom: 1px solid var(--gray-200); }
.stock-filter-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.stock-filter-toggle { display: flex; align-items: center; gap: 6px; font-size: 10.5px; font-weight: 700; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; flex-shrink: 0; }
.stock-toggle-icon { width: 18px; height: 18px; border: 1.5px solid currentColor; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 400; }
.cat-pill { padding: 7px 14px; background: var(--gray-200); color: var(--gray-600); border-radius: 6px; font-size: 10.5px; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; cursor: pointer; border: none; font-family: inherit; transition: background 0.15s; }
.cat-pill.active { background: var(--purple); color: white; }
.adv-filter-bar { background: white; margin: 0 24px; padding: 10px 18px 14px; border-bottom: 1px solid var(--gray-200); }
.select-filter { appearance: none; padding: 7px 28px 7px 11px; border: 1.5px solid var(--gray-300); border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 500; color: var(--gray-600); background: white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23BBBBCC'/%3E%3C/svg%3E") no-repeat right 9px center; cursor: pointer; outline: none; min-width: 120px; }
.select-filter:focus { border-color: var(--purple); }
.product-grid4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px; background: var(--gray-200); }
.product-card { background: white; cursor: pointer; transition: box-shadow 0.2s; position: relative; }
.product-card:hover { box-shadow: 0 4px 20px rgba(123,111,208,0.15); z-index: 2; }
.product-img { width: 100%; aspect-ratio: 1; overflow: hidden; background: #f5f3ee; display: flex; align-items: center; justify-content: center; }
.product-img img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
.product-card:hover .product-img img { transform: scale(1.04); }
.wishlist-btn { position: absolute; top: 8px; right: 8px; width: 26px; height: 26px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 13px; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.1); opacity: 0; transition: opacity 0.2s; }
.product-card:hover .wishlist-btn { opacity: 1; }
.free-badge { position: absolute; top: 8px; left: 8px; background: var(--green); color: white; font-size: 8px; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; padding: 3px 7px; border-radius: 3px; }
.product-info { padding: 9px 10px 11px; }
.product-name { font-size: 11px; color: var(--gray-600); line-height: 1.4; margin-bottom: 4px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
.product-price { font-size: 12.5px; font-weight: 700; color: var(--gray-800); }
.social-proof { font-size: 9.5px; color: var(--red); font-weight: 500; margin-top: 2px; }
.social-proof.neutral { color: var(--gray-400); }
/* Detail */
.detail-layout { display: grid; grid-template-columns: 1fr 380px; gap: 0; min-height: calc(100vh - var(--header-h)); }
.detail-images { background: #f5f3ee; padding: 32px; display: flex; flex-direction: column; gap: 10px; }
.detail-main-img { width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 8px; }
.detail-thumbs { display: flex; gap: 8px; flex-wrap: wrap; }
.detail-thumb { width: 60px; height: 60px; object-fit: cover; border-radius: 5px; cursor: pointer; border: 2px solid transparent; transition: border-color 0.15s; }
.detail-thumb.active { border-color: var(--purple); }
.detail-info { padding: 32px 28px; overflow-y: auto; max-height: calc(100vh - var(--header-h)); }
.detail-seller { font-size: 10px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; color: var(--purple); margin-bottom: 6px; cursor: pointer; }
.detail-name { font-size: 15px; font-weight: 700; color: var(--gray-800); line-height: 1.4; margin-bottom: 10px; }
.detail-price { font-size: 24px; font-weight: 700; color: var(--gray-800); }
.detail-unit { font-size: 11px; color: var(--gray-400); font-weight: 500; margin-left: 6px; }
.stock-badge { display: inline-flex; align-items: center; gap: 4px; font-size: 10px; font-weight: 600; color: var(--green); margin-bottom: 10px; }
.stock-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--green); }
.detail-divider { height: 1px; background: var(--gray-200); margin: 14px 0; }
.spec-row { display: flex; justify-content: space-between; align-items: center; padding: 7px 0; border-bottom: 1px solid var(--gray-200); }
.spec-row:last-child { border-bottom: none; }
.spec-label { font-size: 9.5px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-400); }
.spec-value { font-size: 10.5px; font-weight: 600; color: var(--gray-800); text-align: right; max-width: 55%; }
.qty-row { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.qty-label { font-size: 9.5px; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-600); }
.qty-ctrl { display: flex; align-items: center; border: 1.5px solid var(--gray-300); border-radius: 6px; overflow: hidden; }
.qty-btn { width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; background: var(--gray-100); cursor: pointer; font-size: 14px; color: var(--gray-600); border: none; font-family: inherit; }
.qty-btn:hover { background: var(--purple-bg); color: var(--purple); }
.qty-val { width: 44px; text-align: center; font-size: 12px; font-weight: 700; border: none; outline: none; font-family: inherit; }
.btn-cart { width: 100%; padding: 12px; background: var(--purple); color: white; border: none; border-radius: 8px; font-family: 'Archivo', sans-serif; font-size: 12px; font-weight: 700; letter-spacing: 0.07em; text-transform: uppercase; cursor: pointer; margin-bottom: 8px; }
.btn-cart:hover { background: var(--purple-dark); }
.btn-rfq { width: 100%; padding: 11px; background: white; color: var(--purple); border: 2px solid var(--purple); border-radius: 8px; font-family: 'Archivo', sans-serif; font-size: 12px; font-weight: 700; letter-spacing: 0.07em; text-transform: uppercase; cursor: pointer; margin-bottom: 16px; }
.seller-box { background: var(--gray-100); border-radius: 8px; padding: 12px 14px; margin-bottom: 14px; display: flex; align-items: center; gap: 10px; }
.seller-avatar { width: 38px; height: 38px; border-radius: 7px; background: var(--purple-bg); display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; color: var(--purple); flex-shrink: 0; }
.seller-name { font-size: 11px; font-weight: 700; color: var(--gray-800); }
.seller-meta { font-size: 9.5px; color: var(--gray-400); font-weight: 500; }
.seller-rating { font-size: 10.5px; color: var(--orange); font-weight: 600; }
.btn-contact-seller { margin-left: auto; padding: 7px 12px; border: 1.5px solid var(--purple); border-radius: 5px; color: var(--purple); background: white; font-family: 'Archivo', sans-serif; font-size: 9.5px; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; cursor: pointer; }
.cart-icon { position: fixed; bottom: 24px; right: 24px; width: 48px; height: 48px; background: var(--purple); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 14px rgba(123,111,208,0.4); z-index: 200; }
.cart-count { position: absolute; top: -3px; right: -3px; width: 18px; height: 18px; background: var(--red); border-radius: 50%; font-size: 9px; font-weight: 700; color: white; display: flex; align-items: center; justify-content: center; border: 2px solid white; }

/* ═══════════════════════════════
   MODULE: WE HELP THE PLANET
═══════════════════════════════ */
#mod-planet { }
.planet-hero { height: 380px; overflow: hidden; position: relative; }
.planet-hero img { width: 100%; height: 100%; object-fit: cover; object-position: center 25%; filter: saturate(0.65); }
.planet-hero::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.18), rgba(0,0,0,0.05) 70%, rgba(247,247,251,0.5) 100%); }
.planet-content { max-width: 680px; margin: 0 auto; padding: 56px 24px 48px; text-align: center; }
.planet-title { font-family: 'Archivo Narrow', sans-serif; font-size: 26px; font-weight: 700; letter-spacing: 0.18em; text-transform: uppercase; color: var(--purple); margin-bottom: 22px; }
.planet-body { font-size: 13px; line-height: 1.85; color: var(--gray-600); margin-bottom: 7px; }
.wordcloud-wrap { margin: 44px auto 0; width: 300px; height: 300px; border-radius: 50%; background: var(--purple); display: flex; align-items: center; justify-content: center; }
.wordcloud { width: 260px; height: 260px; display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 2px 5px; padding: 22px; }
.word { color: white; font-family: 'Archivo', sans-serif; text-transform: uppercase; letter-spacing: 0.04em; line-height: 1.2; white-space: nowrap; }
.word.xs { font-size: 8px; font-weight: 400; opacity: 0.72; }
.word.sm { font-size: 10px; font-weight: 500; opacity: 0.85; }
.word.md { font-size: 12.5px; font-weight: 600; }
.word.lg { font-size: 18px; font-weight: 700; }
.word.xl { font-size: 24px; font-weight: 700; }
.planet-initiatives { display: grid; grid-template-columns: repeat(3, 1fr); gap: 18px; padding: 0 32px 56px; max-width: 1100px; margin: 0 auto; }
.init-card { background: white; border-radius: 12px; padding: 22px 20px; text-align: center; }
.init-icon { font-size: 28px; margin-bottom: 10px; display: block; }
.init-title { font-size: 10.5px; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); margin-bottom: 8px; }
.init-desc { font-size: 11.5px; line-height: 1.65; color: var(--gray-600); }
.planet-impact { background: var(--purple); padding: 50px 24px; text-align: center; }
.impact-label-top { font-size: 10.5px; font-weight: 700; letter-spacing: 0.18em; text-transform: uppercase; color: rgba(255,255,255,0.65); margin-bottom: 32px; }
.impact-grid { display: flex; justify-content: center; gap: 64px; flex-wrap: wrap; max-width: 760px; margin: 0 auto; }
.impact-stat { color: white; }
.impact-number { font-size: 40px; font-weight: 700; }
.impact-sublabel { font-size: 10px; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; opacity: 0.7; margin-top: 4px; }
.planet-foundations { padding: 60px 32px; max-width: 1100px; margin: 0 auto; text-align: center; }
.found-title { font-family: 'Archivo Narrow', sans-serif; font-size: 19px; font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase; color: var(--purple); margin-bottom: 8px; }
.found-sub { font-size: 12px; color: var(--gray-600); line-height: 1.7; margin-bottom: 36px; }
.found-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 18px; }
.found-card { background: white; border-radius: 12px; overflow: hidden; border: 1.5px solid var(--gray-200); transition: box-shadow 0.2s, border-color 0.2s; }
.found-card:hover { box-shadow: 0 8px 22px rgba(123,111,208,0.12); border-color: var(--purple); }
.found-img { width: 100%; height: 120px; object-fit: cover; filter: saturate(0.75); }
.found-body { padding: 14px 16px 18px; text-align: left; }
.found-name { font-size: 11px; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; color: var(--gray-800); margin-bottom: 4px; }
.found-focus { font-size: 9.5px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: var(--purple); margin-bottom: 7px; }
.found-desc { font-size: 11px; line-height: 1.6; color: var(--gray-600); }
.planet-cta { background: var(--gray-100); padding: 48px 24px; text-align: center; border-top: 1px solid var(--gray-200); }
.planet-cta p { font-size: 12.5px; color: var(--gray-600); line-height: 1.75; max-width: 520px; margin: 0 auto 20px; }
.btn-purple { display: inline-block; padding: 11px 26px; background: var(--purple); color: white; border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.09em; text-transform: uppercase; border: none; cursor: pointer; }
.btn-purple:hover { background: var(--purple-dark); }
.btn-outline-p { display: inline-block; padding: 10px 26px; background: white; color: var(--purple); border: 2px solid var(--purple); border-radius: 6px; font-family: 'Archivo', sans-serif; font-size: 10.5px; font-weight: 700; letter-spacing: 0.09em; text-transform: uppercase; cursor: pointer; margin-left: 8px; }
.btn-outline-p:hover { background: var(--purple-bg); }
/* Footer inside */
.pf { background: white; border-top: 1px solid var(--gray-200); padding: 32px 40px 20px; }
.pf-grid { display: grid; grid-template-columns: 190px 1fr 1fr 1fr; gap: 32px; max-width: 900px; margin: 0 auto 24px; }
.pf-logo { display: flex; align-items: center; gap: 7px; margin-bottom: 12px; }
.pf-logo-text { font-family: 'Archivo Narrow', sans-serif; font-weight: 700; font-size: 11.5px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--purple); }
.pf-tagbtn { border: 1.5px solid var(--gray-400); border-radius: 4px; padding: 5px 10px; font-size: 8.5px; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; background: white; font-family: inherit; }
.pf-col-title { font-size: 9px; font-weight: 700; letter-spacing: 0.14em; text-transform: uppercase; color: var(--purple); margin-bottom: 12px; }
.pf-address { font-size: 11px; color: var(--gray-600); line-height: 1.7; margin-bottom: 12px; }
.pf-contact-btn { border: 1.5px solid var(--gray-400); border-radius: 4px; padding: 5px 12px; font-size: 9px; font-weight: 700; letter-spacing: 0.07em; text-transform: uppercase; color: var(--gray-600); cursor: pointer; background: white; font-family: inherit; }
.pf-social { display: flex; gap: 7px; margin-top: 12px; }
.pf-social-icon { width: 24px; height: 24px; border-radius: 50%; background: var(--gray-200); display: flex; align-items: center; justify-content: center; font-size: 10px; cursor: pointer; color: var(--gray-600); transition: background 0.15s; }
.pf-social-icon:hover { background: var(--purple); color: white; }
.pf-links { list-style: none; }
.pf-links li { margin-bottom: 8px; }
.pf-links a { font-size: 11px; color: var(--gray-600); text-decoration: none; }
.pf-links a:hover { color: var(--purple); }
.pf-bottom { max-width: 900px; margin: 0 auto; padding-top: 16px; border-top: 1px solid var(--gray-200); font-size: 9.5px; color: var(--gray-400); }

/* ── DASHBOARD WIDGETS ── */
@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: .5; transform: scale(1.3); }
}
#mod-dashboard { padding: 0; overflow: hidden; }
#mod-dashboard > div { overflow-y: auto; }

/* ── MAPPING MODULE ── */
#mod-mapping { height: calc(100vh - var(--header-h)); display: none; flex-direction: column; overflow: hidden; }
#mod-mapping.active { display: flex; }
#map-leaflet-container { flex: 1; min-height: 400px; }
.map-page-title { font-size: 11px; font-weight: 700; letter-spacing: .14em; color: var(--gray-800); text-transform: uppercase; padding: 16px 24px 8px; flex-shrink: 0; }
.map-filters-wrap { padding: 0 24px 12px; flex-shrink: 0; display: flex; flex-direction: column; gap: 6px; }
.map-filter-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.map-filter-toggle { display: flex; align-items: center; gap: 5px; font-size: 10px; font-weight: 600; color: var(--gray-600); cursor: pointer; white-space: nowrap; }
.map-filter-toggle-icon { width: 16px; height: 16px; border-radius: 50%; border: 1.5px solid var(--gray-300); display: flex; align-items: center; justify-content: center; font-size: 11px; }
.map-select-filter { padding: 5px 8px; border: 1.5px solid var(--gray-200); border-radius: 6px; font-family: Archivo, sans-serif; font-size: 10px; color: var(--gray-600); background: white; cursor: pointer; outline: none; }
.map-btn-reset { padding: 5px 12px; border: 1.5px solid var(--gray-300); border-radius: 6px; font-family: Archivo, sans-serif; font-size: 10px; font-weight: 600; color: var(--gray-600); background: white; cursor: pointer; }

/* ── TREND GALLERY ── */
#mod-trendgallery { display: none; flex-direction: column; padding-bottom: 32px; }
#mod-trendgallery.active { display: block; min-height: 100vh; }
.tg-overlay { pointer-events: none; }
#mod-trendgallery .tg-overlay button { pointer-events: all; }

.map-pin:hover .pin-tooltip { display:block !important; }
.map-pin:hover svg path:first-child { fill: #5a4fc0; }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="logo" onclick="navigate('dashboard')" style="cursor:pointer;display:flex;align-items:center;gap:12px">
    <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <clipPath id="c"><circle cx="20" cy="20" r="19"/></clipPath>
      </defs>
      <g clip-path="url(#c)">
        <!-- Fond blanc du cercle -->
        <circle cx="20" cy="20" r="19" fill="white" opacity="0.15"/>
        <!-- Bandes horizontales blanches -->
        <rect x="1" y="5"  width="38" height="4" fill="white"/>
        <rect x="1" y="11" width="38" height="4" fill="white"/>
        <rect x="1" y="17" width="38" height="4" fill="white"/>
        <rect x="1" y="23" width="38" height="4" fill="white"/>
        <rect x="1" y="29" width="38" height="4" fill="white"/>
        <rect x="1" y="35" width="38" height="4" fill="white"/>
        <!-- Diagonales gauche-droite -->
        <line x1="-2" y1="42" x2="22" y2="-2" stroke="white" stroke-width="5"/>
        <line x1="6"  y1="44" x2="34" y2="-2" stroke="white" stroke-width="5"/>
        <!-- Diagonales droite-gauche -->
        <line x1="18" y1="-2" x2="42" y2="42" stroke="white" stroke-width="5"/>
        <line x1="8"  y1="-2" x2="44" y2="34" stroke="white" stroke-width="5"/>
      </g>
      <circle cx="20" cy="20" r="19" fill="none" stroke="white" stroke-width="1.5"/>
    </svg>
    <span style="color:white;font-size:15px;letter-spacing:.12em;text-transform:uppercase;font-weight:800;font-family:Archivo,sans-serif">FASHION <span style="font-weight:400">SOURCING</span></span>
  </div>
  <div class="header-search">
    <svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
    <input type="text" placeholder="Search manufacturers, materials, experts...">
  </div>
  <div class="header-user">
    <div class="user-logo">Dior</div>
    <div class="user-name">Ellie Demaury</div>
  </div>
</header>

<!-- SIDEBAR -->
<aside>
  <div class="nav-item active" id="nav-dashboard" onclick="navigate('dashboard')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
    Dashboard
  </div>

  <div class="nav-item" id="nav-search" onclick="navigate('search'); toggleSub('sub-search')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
    Search <span class="nav-arrow" id="arr-search">∨</span>
  </div>
  <div class="nav-sub" id="sub-search">
    <span class="nav-sub-item" onclick="navigate('search'); switchSearchTab('material')">Material</span>
    <span class="nav-sub-item" onclick="navigate('search'); switchSearchTab('component')">Component</span>
    <span class="nav-sub-item" onclick="navigate('search'); switchSearchTab('manufacturer')">Manufacturer</span>
    <span class="nav-sub-item" onclick="navigate('search'); switchSearchTab('packaging')">Packaging</span>
    <span class="nav-sub-item" onclick="navigate('search'); switchSearchTab('expert')">Expert</span>
    <span class="nav-sub-item" id="nav-sub-mapping" onclick="navigate('mapping')">Mapping</span>
  </div>

  <div class="nav-item" onclick="showComingSoon('Campaign')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
    Campaign
  </div>

  <div class="nav-item" onclick="showComingSoon('Events')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
    Events
  </div>

  <div class="nav-item" id="nav-job" onclick="navigate('job'); toggleSub('sub-job')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/></svg>
    Job <span class="nav-arrow" id="arr-job">∨</span>
  </div>
  <div class="nav-sub" id="sub-job">
    <span class="nav-sub-item" onclick="navigate('job'); showJobView('jv-grid')">Browse Jobs</span>
    <span class="nav-sub-item" onclick="navigate('job'); showJobView('jv-list')">Job List</span>
  </div>

  <div class="nav-item" onclick="showComingSoon('Messaging')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
    Messaging
  </div>

  <div class="nav-item" onclick="showComingSoon('My Wishlist')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
    My Wishlist
  </div>

  <div class="nav-item" onclick="showComingSoon('My Project')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
    My Project
  </div>

  <div class="nav-item" onclick="showComingSoon('RFQ')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
    RFQ
  </div>

  <div class="nav-item" id="nav-stock" onclick="navigate('stock'); toggleSub('sub-stock')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
    Stock <span class="nav-arrow" id="arr-stock">∨</span>
  </div>
  <div class="nav-sub" id="sub-stock">
    <span class="nav-sub-item active" onclick="navigate('stock')">Material</span>
    <span class="nav-sub-item" onclick="navigate('stock')">Product</span>
  </div>

  <div class="nav-item" id="nav-trendgallery" onclick="navigate('trendgallery')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
    Trend Gallery
  </div>

  <div class="nav-item" onclick="showComingSoon('Search History')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
    Search History
  </div>

  <div class="nav-item" onclick="showComingSoon('Partners')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
    Partners
  </div>

  <div class="nav-item" onclick="showComingSoon('Ads Program')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
    Ads Program
  </div>

  <div class="nav-item" id="nav-planet" onclick="navigate('planet')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
    We Help The Planet
  </div>

  <div class="nav-item" onclick="showComingSoon('Contact Us')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
    Contact Us
  </div>

  <div class="nav-item" onclick="showComingSoon('Settings')">
    <svg class="nav-icon" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
    Settings
  </div>
</aside>

<main id="main-content">

<!-- ══════════ DASHBOARD ══════════ -->
<div class="module active" id="mod-dashboard">
  <div style="padding:28px 32px;overflow-y:auto;height:100%">

    <div class="dash-welcome">Welcome back, Ellie 👋</div>
    <div class="dash-sub">Here's what's happening on Fashion Sourcing today.</div>

    <!-- MIDDLE ROW: Sector Ratio | Users Online | Timezone + Currency -->
    <div style="display:grid;grid-template-columns:1fr 1.4fr 1fr;gap:16px;margin-bottom:24px;align-items:stretch">

      <!-- Sector Ratio -->
      <div style="background:white;border-radius:12px;padding:20px 24px;border:1px solid var(--gray-200)">
        <div style="font-size:10px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase;margin-bottom:16px">Sector Ratio</div>
        <div style="display:flex;align-items:baseline;gap:8px;margin-bottom:4px">
          <div style="font-size:48px;font-weight:800;color:var(--gray-800);line-height:1">248</div>
          <div style="font-size:10px;font-weight:600;color:var(--gray-400)">suppliers</div>
        </div>
        <div style="font-size:11px;color:var(--gray-400);margin-bottom:16px">registered &amp; active on platform</div>
        <div style="display:flex;flex-direction:column;gap:8px">
          <div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--gray-600);margin-bottom:3px"><span style="display:flex;align-items:center;gap:5px"><span style="width:8px;height:8px;border-radius:2px;background:#5B5EA6;display:inline-block"></span>Clothings</span><span style="font-weight:700;color:var(--gray-800)">35%</span></div>
            <div style="height:4px;background:var(--gray-200);border-radius:2px"><div style="width:35%;height:100%;background:#5B5EA6;border-radius:2px"></div></div>
          </div>
          <div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--gray-600);margin-bottom:3px"><span style="display:flex;align-items:center;gap:5px"><span style="width:8px;height:8px;border-radius:2px;background:#7B6FD0;display:inline-block"></span>Shoes</span><span style="font-weight:700;color:var(--gray-800)">20%</span></div>
            <div style="height:4px;background:var(--gray-200);border-radius:2px"><div style="width:20%;height:100%;background:#7B6FD0;border-radius:2px"></div></div>
          </div>
          <div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--gray-600);margin-bottom:3px"><span style="display:flex;align-items:center;gap:5px"><span style="width:8px;height:8px;border-radius:2px;background:#BEB5F2;display:inline-block"></span>Accessories</span><span style="font-weight:700;color:var(--gray-800)">15%</span></div>
            <div style="height:4px;background:var(--gray-200);border-radius:2px"><div style="width:15%;height:100%;background:#BEB5F2;border-radius:2px"></div></div>
          </div>
          <div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--gray-600);margin-bottom:3px"><span style="display:flex;align-items:center;gap:5px"><span style="width:8px;height:8px;border-radius:2px;background:#9B8FE8;display:inline-block"></span>Bags</span><span style="font-weight:700;color:var(--gray-800)">15%</span></div>
            <div style="height:4px;background:var(--gray-200);border-radius:2px"><div style="width:15%;height:100%;background:#9B8FE8;border-radius:2px"></div></div>
          </div>
          <div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--gray-600);margin-bottom:3px"><span style="display:flex;align-items:center;gap:5px"><span style="width:8px;height:8px;border-radius:2px;background:#7DD0E8;display:inline-block"></span>Upholstery</span><span style="font-weight:700;color:var(--gray-800)">8%</span></div>
            <div style="height:4px;background:var(--gray-200);border-radius:2px"><div style="width:8%;height:100%;background:#7DD0E8;border-radius:2px"></div></div>
          </div>
          <div>
            <div style="display:flex;justify-content:space-between;font-size:10px;color:var(--gray-600);margin-bottom:3px"><span style="display:flex;align-items:center;gap:5px"><span style="width:8px;height:8px;border-radius:2px;background:#D4CCFF;display:inline-block"></span>Others</span><span style="font-weight:700;color:var(--gray-800)">7%</span></div>
            <div style="height:4px;background:var(--gray-200);border-radius:2px"><div style="width:7%;height:100%;background:#D4CCFF;border-radius:2px"></div></div>
          </div>
        </div>
      </div>

      <!-- Users Online — Leaflet map + live -->
      <div style="background:white;border-radius:12px;padding:20px 24px;border:1px solid var(--gray-200);display:flex;flex-direction:column;min-height:0">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;flex-shrink:0">
          <div style="font-size:10px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase">Users Online Now</div>
          <div style="display:flex;align-items:center;gap:6px">
            <div style="width:7px;height:7px;border-radius:50%;background:#2ECC8A;animation:pulse 1.4s infinite;flex-shrink:0"></div>
            <div id="online-count" style="font-size:22px;font-weight:800;color:var(--gray-800);line-height:1">143</div>
            <div style="font-size:9px;font-weight:700;color:#2ECC8A;letter-spacing:.08em">LIVE</div>
          </div>
        </div>
        <div id="dash-map" style="flex:1;min-height:220px;border-radius:8px;overflow:hidden"></div>
        <div style="display:flex;align-items:center;justify-content:center;gap:16px;margin-top:10px;flex-shrink:0">
          <div style="display:flex;align-items:center;gap:5px;font-size:9px;color:var(--gray-600)"><div style="width:10px;height:10px;border-radius:2px;background:#D4CCFF"></div>100–500</div>
          <div style="display:flex;align-items:center;gap:5px;font-size:9px;color:var(--gray-600)"><div style="width:10px;height:10px;border-radius:2px;background:#9B8FE8"></div>500–1k</div>
          <div style="display:flex;align-items:center;gap:5px;font-size:9px;color:var(--gray-600)"><div style="width:10px;height:10px;border-radius:2px;background:#5B5EA6"></div>+1000</div>
        </div>
      </div>

      <!-- Colonne droite : Timezone + Currency stacked -->
      <div style="display:flex;flex-direction:column;gap:12px;height:100%">

        <!-- Timezones — compact -->
        <div style="background:white;border-radius:12px;padding:12px 16px;border:1px solid var(--gray-200);flex:0 0 auto;display:flex;flex-direction:column">
          <div style="font-size:10px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase;margin-bottom:8px">Timezone</div>
          <div style="display:flex;flex-direction:column;gap:0">
            <div style="display:flex;justify-content:space-between;align-items:center;padding:5px 0;border-bottom:1px solid var(--gray-200)">
              <div><div id="tz-paris" style="font-size:16px;font-weight:800;color:var(--gray-800);letter-spacing:1px;font-variant-numeric:tabular-nums">--:--</div><div style="font-size:7px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase">Paris</div></div>
              <div style="text-align:right"><div id="tz-ny" style="font-size:16px;font-weight:800;color:var(--gray-800);letter-spacing:1px;font-variant-numeric:tabular-nums">--:--</div><div style="font-size:7px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase">New York</div></div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:5px 0;border-bottom:1px solid var(--gray-200)">
              <div><div id="tz-shanghai" style="font-size:16px;font-weight:800;color:var(--gray-800);letter-spacing:1px;font-variant-numeric:tabular-nums">--:--</div><div style="font-size:7px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase">Shanghai</div></div>
              <div style="text-align:right"><div id="tz-dubai" style="font-size:16px;font-weight:800;color:var(--gray-800);letter-spacing:1px;font-variant-numeric:tabular-nums">--:--</div><div style="font-size:7px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase">Dubai</div></div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:5px 0">
              <div><div id="tz-mumbai" style="font-size:16px;font-weight:800;color:var(--gray-800);letter-spacing:1px;font-variant-numeric:tabular-nums">--:--</div><div style="font-size:7px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase">Mumbai</div></div>
              <div style="text-align:right"><div id="tz-hk" style="font-size:16px;font-weight:800;color:var(--gray-800);letter-spacing:1px;font-variant-numeric:tabular-nums">--:--</div><div style="font-size:7px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase">Hong Kong</div></div>
            </div>
          </div>
        </div>

        <!-- Currency Converter — compact -->
        <div style="background:white;border-radius:12px;padding:16px 20px;border:1px solid var(--gray-200);flex:1;display:flex;flex-direction:column;justify-content:space-between">
          <div style="font-size:10px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase;margin-bottom:12px">Currency Converter</div>
          <div style="display:grid;grid-template-columns:1fr 28px 1fr;gap:8px;align-items:center">
            <div>
              <input id="cc-amount" type="number" value="150" style="width:100%;padding:7px 10px;border:1.5px solid var(--gray-300);border-radius:7px;font-family:Archivo,sans-serif;font-size:18px;font-weight:700;color:var(--gray-800);outline:none;text-align:center" oninput="convertCurrency()">
              <select id="cc-from" onchange="convertCurrency()" style="width:100%;margin-top:5px;padding:5px 6px;border:1.5px solid var(--gray-200);border-radius:6px;font-family:Archivo,sans-serif;font-size:10px;color:var(--gray-600);background:white;cursor:pointer">
                <option value="EUR" selected>🇪🇺 EUR</option>
                <option value="USD">🇺🇸 USD</option>
                <option value="GBP">🇬🇧 GBP</option>
                <option value="CNY">🇨🇳 CNY</option>
                <option value="JPY">🇯🇵 JPY</option>
                <option value="TRY">🇹🇷 TRY</option>
                <option value="INR">🇮🇳 INR</option>
                <option value="MAD">🇲🇦 MAD</option>
              </select>
            </div>
            <div style="display:flex;align-items:center;justify-content:center;cursor:pointer" onclick="swapCurrencies()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#7B6FD0" stroke-width="2.2"><path d="M7 16V4m0 0L3 8m4-4l4 4"/><path d="M17 8v12m0 0l4-4m-4 4l-4-4"/></svg>
            </div>
            <div>
              <input id="cc-result" type="number" readonly style="width:100%;padding:7px 10px;border:1.5px solid var(--purple-bg);border-radius:7px;font-family:Archivo,sans-serif;font-size:18px;font-weight:700;color:var(--purple);background:var(--gray-100);outline:none;text-align:center">
              <select id="cc-to" onchange="convertCurrency()" style="width:100%;margin-top:5px;padding:5px 6px;border:1.5px solid var(--gray-200);border-radius:6px;font-family:Archivo,sans-serif;font-size:10px;color:var(--gray-600);background:white;cursor:pointer">
                <option value="EUR">🇪🇺 EUR</option>
                <option value="USD" selected>🇺🇸 USD</option>
                <option value="GBP">🇬🇧 GBP</option>
                <option value="CNY">🇨🇳 CNY</option>
                <option value="JPY">🇯🇵 JPY</option>
                <option value="TRY">🇹🇷 TRY</option>
                <option value="INR">🇮🇳 INR</option>
                <option value="MAD">🇲🇦 MAD</option>
              </select>
            </div>
          </div>
          <div id="cc-rate-label" style="text-align:center;font-size:9px;color:var(--gray-400);margin-top:8px"></div>
        </div>

      </div><!-- /col droite -->

    </div><!-- /MIDDLE ROW -->

    <!-- BOTTOM ROW: Cards + Activity full width -->
    <div style="display:flex;flex-direction:column;gap:16px">

      <!-- 6 cards + Recent Activity —

        <!-- 6 module cards -->
        <div class="dash-grid" style="margin-bottom:0">
          <div class="dash-card" onclick="navigate('search')"><div class="dash-card-icon">🏭</div><div class="dash-card-title">Manufacturers</div><div class="dash-card-desc">Find verified suppliers worldwide.</div><div class="dash-card-stat">248</div><div class="dash-card-stat-label">Active Suppliers</div></div>
          <div class="dash-card" onclick="navigate('job')"><div class="dash-card-icon">💼</div><div class="dash-card-title">Job Board</div><div class="dash-card-desc">Browse fashion industry job offers.</div><div class="dash-card-stat">300</div><div class="dash-card-stat-label">Open Positions</div></div>
          <div class="dash-card" onclick="navigate('stock')"><div class="dash-card-icon">🧶</div><div class="dash-card-title">Stocks</div><div class="dash-card-desc">Buy surplus materials. Reduce waste.</div><div class="dash-card-stat">1,842</div><div class="dash-card-stat-label">Lots Available</div></div>
          <div class="dash-card" onclick="navigate('search'); switchSearchTab('expert')"><div class="dash-card-icon">🎨</div><div class="dash-card-title">Experts</div><div class="dash-card-desc">Connect with fashion freelancers.</div><div class="dash-card-stat">312</div><div class="dash-card-stat-label">Available</div></div>
          <div class="dash-card" onclick="navigate('search'); switchSearchTab('brand')"><div class="dash-card-icon">👗</div><div class="dash-card-title">Brand Directory</div><div class="dash-card-desc">4,600+ brands looking for suppliers.</div><div class="dash-card-stat">4,600+</div><div class="dash-card-stat-label">Registered</div></div>
          <div class="dash-card" onclick="navigate('planet')"><div class="dash-card-icon">🌍</div><div class="dash-card-title">We Help The Planet</div><div class="dash-card-desc">Your subscription makes a difference.</div><div class="dash-card-stat">€124K</div><div class="dash-card-stat-label">Donated</div></div>
        </div>

        <!-- Recent Activity — sous les cards -->
        <div class="dash-activity">
          <div class="activity-title">Recent Activity</div>
          <div class="activity-item"><div class="activity-dot green"></div><div class="activity-text">Yongli Textiles responded to your RFQ</div><div class="activity-time">2h ago</div></div>
          <div class="activity-item"><div class="activity-dot"></div><div class="activity-text">New job posted by Girault Roy — Senior Designer</div><div class="activity-time">4h ago</div></div>
          <div class="activity-item"><div class="activity-dot orange"></div><div class="activity-text">5 new stock lots added in Cashmere</div><div class="activity-time">6h ago</div></div>
          <div class="activity-item"><div class="activity-dot green"></div><div class="activity-text">Atelier Tessile verified sustainability certificates</div><div class="activity-time">1d ago</div></div>
          <div class="activity-item"><div class="activity-dot"></div><div class="activity-text">Sophie Laurent accepted your connection</div><div class="activity-time">1d ago</div></div>
        </div>
      </div>

    </div><!-- /BOTTOM ROW -->


  </div>
</div>

<!-- ══════════ MODULE 1: SEARCH ══════════ -->
<div class="module" id="mod-search">
  <!-- Search Results View -->
  <div class="search-view active" id="sv-results">
    <div class="page-header" id="s-page-title">MANUFACTURER SEARCH</div>
    <div style="padding:0 32px 32px">
      <div class="tab-nav">
        <button class="tab-btn" onclick="switchSearchTab('material')">Materials</button>
        <button class="tab-btn" onclick="switchSearchTab('component')">Components</button>
        <button class="tab-btn active" onclick="switchSearchTab('manufacturer')">Manufacturers</button>
        <button class="tab-btn" onclick="switchSearchTab('packaging')">Packaging</button>
        <button class="tab-btn" onclick="switchSearchTab('expert')">Experts / Freelancers</button>
        <button class="tab-btn" onclick="switchSearchTab('brand')">Brands</button>
      </div>
      <div class="search-box">
        <div class="filters-bar">
          <div class="dropdown-wrapper"><button class="filter-btn" onclick="toggleDd('dd-s1')">Product Type <span style="font-size:9px">▼</span></button><div class="dropdown-menu" id="dd-s1"><div class="dropdown-item">All Products</div><div class="dropdown-item">Woven Fabrics</div><div class="dropdown-item">Knitwear</div><div class="dropdown-item">Leather Goods</div><div class="dropdown-item">Accessories</div></div></div>
          <div class="dropdown-wrapper"><button class="filter-btn" onclick="toggleDd('dd-s2')">Country <span style="font-size:9px">▼</span></button><div class="dropdown-menu" id="dd-s2"><div class="dropdown-item">All Countries</div><div class="dropdown-item">China</div><div class="dropdown-item">Italy</div><div class="dropdown-item">Portugal</div><div class="dropdown-item">India</div><div class="dropdown-item">Turkey</div><div class="dropdown-item">Morocco</div></div></div>
          <div class="dropdown-wrapper"><button class="filter-btn" onclick="toggleDd('dd-s3')">MOQ <span style="font-size:9px">▼</span></button><div class="dropdown-menu" id="dd-s3"><div class="dropdown-item">Any MOQ</div><div class="dropdown-item">Under 50 pcs</div><div class="dropdown-item">50–200 pcs</div><div class="dropdown-item">200–500 pcs</div><div class="dropdown-item">500+ pcs</div></div></div>
          <div class="dropdown-wrapper"><button class="filter-btn" onclick="toggleDd('dd-s4')">Certification <span style="font-size:9px">▼</span></button><div class="dropdown-menu" id="dd-s4"><div class="dropdown-item">All</div><div class="dropdown-item">GOTS</div><div class="dropdown-item">OEKO-TEX</div><div class="dropdown-item">ISO 9001</div><div class="dropdown-item">Fair Trade</div><div class="dropdown-item">B Corp</div></div></div>
          <input class="keyword-input" type="text" placeholder="Search by name...">
        </div>
        <div class="search-actions"><button class="btn-search">Search</button><button class="btn-reset">Reset</button></div>
      </div>
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:14px">
        <div class="results-count" id="s-results-count">248 Manufacturers Found</div>
      </div>
      <div id="s-cards-container" class="sup-cards-grid">
        <!-- Populated by JS -->
      </div>
      <div class="pagination"><span>Showing 1–6 of 248</span><div class="pagination-pages"><div class="page-arrow">‹</div><div class="page-num active">1</div><div class="page-num">2</div><div class="page-num">3</div><div class="page-arrow">›</div></div></div>
    </div>
  </div>

  <!-- Supplier Profile View -->
  <div class="search-view" id="sv-profile">
    <div style="padding:24px 32px 32px">
      <button class="btn-back" onclick="showSearchView('sv-results')">← Back to Results</button>
      <div class="profile-header">
        <div class="profile-cover">
          <img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=900&h=250&fit=crop" alt="">
          <div class="profile-cover-overlay"></div>
          <div class="profile-cover-badges"><span class="badge badge-green" style="padding:5px 9px;font-size:9px">✓ Sustainable</span><span class="badge badge-purple" style="padding:5px 9px;font-size:9px">✓ Verified</span></div>
          <div class="profile-logo-wrap">YL</div>
        </div>
        <div class="profile-info">
          <div class="profile-name">Yongli Textiles Co., Ltd.</div>
          <div class="profile-meta">📍 Guangzhou, China &nbsp;·&nbsp; Est. 2006 &nbsp;·&nbsp; 850 employees</div>
          <div class="profile-tags-row"><span class="card-tag">Woven Fabrics</span><span class="card-tag">Knitwear</span><span class="card-tag">Jersey</span><span class="card-tag green">GOTS</span><span class="card-tag green">OEKO-TEX</span></div>
          <div class="profile-actions"><button class="btn-contact">Contact Supplier</button><button class="btn-wishlist">♡ Wishlist</button><button class="btn-wishlist">📋 My Project</button></div>
        </div>
      </div>
      <!-- Top Products -->
      <div style="margin:24px 0 8px">
        <div style="font-size:10px;font-weight:700;letter-spacing:.12em;color:var(--purple);text-transform:uppercase;margin-bottom:12px">Top Products</div>
        <div style="display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr;gap:8px;height:220px">
          <!-- Grande image gauche -->
          <div style="border-radius:10px;overflow:hidden;position:relative">
            <img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=500&h=440&fit=crop" style="width:100%;height:100%;object-fit:cover" alt="">
            <div style="position:absolute;bottom:0;left:0;right:0;padding:8px 10px;background:linear-gradient(transparent,rgba(0,0,0,.5))"><span style="font-size:9px;font-weight:700;color:white;letter-spacing:.08em">WOVEN JERSEY</span></div>
          </div>
          <!-- 4 petites images -->
          <div style="border-radius:10px;overflow:hidden;position:relative">
            <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?w=240&h=220&fit=crop" style="width:100%;height:100%;object-fit:cover" alt="">
            <div style="position:absolute;bottom:0;left:0;right:0;padding:6px 8px;background:linear-gradient(transparent,rgba(0,0,0,.5))"><span style="font-size:8px;font-weight:700;color:white;letter-spacing:.06em">KNITWEAR</span></div>
          </div>
          <div style="border-radius:10px;overflow:hidden;position:relative">
            <img src="https://images.unsplash.com/photo-1594938298603-c8148c4b4545?w=240&h=220&fit=crop" style="width:100%;height:100%;object-fit:cover" alt="">
            <div style="position:absolute;bottom:0;left:0;right:0;padding:6px 8px;background:linear-gradient(transparent,rgba(0,0,0,.5))"><span style="font-size:8px;font-weight:700;color:white;letter-spacing:.06em">JERSEY</span></div>
          </div>
          <div style="border-radius:10px;overflow:hidden;position:relative">
            <img src="https://images.unsplash.com/photo-1489987707025-afc232f7ea0f?w=240&h=220&fit=crop" style="width:100%;height:100%;object-fit:cover" alt="">
            <div style="position:absolute;bottom:0;left:0;right:0;padding:6px 8px;background:linear-gradient(transparent,rgba(0,0,0,.5))"><span style="font-size:8px;font-weight:700;color:white;letter-spacing:.06em">PONTE</span></div>
          </div>
          <div style="border-radius:10px;overflow:hidden;position:relative">
            <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=240&h=220&fit=crop" style="width:100%;height:100%;object-fit:cover" alt="">
            <div style="position:absolute;bottom:0;left:0;right:0;padding:6px 8px;background:linear-gradient(transparent,rgba(0,0,0,.5))"><span style="font-size:8px;font-weight:700;color:white;letter-spacing:.06em">SCUBA</span></div>
          </div>
        </div>
      </div>

      <!-- Tabs décalés vers le bas -->
      <div style="height:20px"></div>
      <div class="profile-tabs">
        <div class="ptab active" onclick="switchPtab('overview')">Overview</div>
        <div class="ptab" onclick="switchPtab('catalog')">Catalogue</div>
        <div class="ptab" onclick="switchPtab('machines')">Machines</div>
        <div class="ptab" onclick="switchPtab('clients')">Clients</div>
        <div class="ptab" onclick="switchPtab('financial')">Financials</div>
        <div class="ptab" onclick="switchPtab('sustainability')">Sustainability</div>
      </div>
      <div class="profile-tab-content active" id="ptab-overview">
        <div class="profile-2col">
          <div class="section-card">
            <div class="section-title">General Information</div>
            <div class="info-row"><span class="info-label">Type</span><span class="info-value">Manufacturer & Exporter</span></div>
            <div class="info-row"><span class="info-label">Founded</span><span class="info-value">2006</span></div>
            <div class="info-row"><span class="info-label">Employees</span><span class="info-value">850</span></div>
            <div class="info-row"><span class="info-label">Factory Size</span><span class="info-value">45,000 m²</span></div>
            <div class="info-row"><span class="info-label">Annual Output</span><span class="info-value">12M units/year</span></div>
            <div class="info-row"><span class="info-label">Lead Time</span><span class="info-value">45–60 days</span></div>
            <div class="info-row"><span class="info-label">MOQ</span><span class="info-value">200 pcs/colour</span></div>
          </div>
          <div class="section-card">
            <div class="section-title">Key Figures</div>
            <div class="profile-3col" style="margin-bottom:0"><div class="big-stat"><div class="big-stat-value">4.8</div><div class="big-stat-label">Rating</div></div><div class="big-stat"><div class="big-stat-value">127</div><div class="big-stat-label">Clients</div></div><div class="big-stat"><div class="big-stat-value">18</div><div class="big-stat-label">Years</div></div></div>
            <div style="height:1px;background:var(--gray-200);margin:12px 0"></div>
            <div class="section-title" style="margin-bottom:8px">Specialties</div>
            <div class="profile-tags-row"><span class="card-tag">Jersey</span><span class="card-tag">Ponte</span><span class="card-tag">Scuba</span><span class="card-tag">Interlock</span><span class="card-tag">Mesh</span><span class="card-tag">Fleece</span></div>
            <div style="height:1px;background:var(--gray-200);margin:12px 0"></div>
            <div class="section-title" style="margin-bottom:8px">Certifications</div>
            <div class="profile-tags-row"><span class="card-tag green">GOTS</span><span class="card-tag green">OEKO-TEX</span><span class="card-tag green">ISO 14001</span><span class="card-tag green">SA8000</span></div>
          </div>
        </div>
        <div class="section-card"><div class="section-title">About</div><p style="font-size:11.5px;line-height:1.7;color:var(--gray-600)">Yongli Textiles Co., Ltd. is a leading garment manufacturer based in Guangzhou, specializing in women's and men's apparel. With 18 years of experience, we serve 127+ international brands across Europe, North America, Asia and Australia. Our 45,000m² facility houses latest machinery and technology, with full GOTS and OEKO-TEX certification.</p></div>
      </div>
      <div class="profile-tab-content" id="ptab-catalog">
        <div class="section-card"><div class="section-title">Product Catalogue — 2025</div>
        <div class="catalog-grid4">
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Women's Jersey Dress</div><div class="catalog-ref">REF: YL-2025-WD-001</div></div></div>
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Men's Ponte Trousers</div><div class="catalog-ref">REF: YL-2025-MT-022</div></div></div>
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Knit Sweater Oversized</div><div class="catalog-ref">REF: YL-2025-KS-044</div></div></div>
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Scuba Bodycon Skirt</div><div class="catalog-ref">REF: YL-2025-SK-011</div></div></div>
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Woven Blazer Classic</div><div class="catalog-ref">REF: YL-2025-BL-007</div></div></div>
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Jersey Co-ord Set</div><div class="catalog-ref">REF: YL-2025-CS-033</div></div></div>
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1529139574466-a303027c1d8b?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Mesh Sportswear Top</div><div class="catalog-ref">REF: YL-2025-SP-019</div></div></div>
          <div class="catalog-item"><div class="catalog-img"><img src="https://images.unsplash.com/photo-1445205170230-053b83016050?w=200&h=120&fit=crop" alt=""></div><div class="catalog-info"><div class="catalog-name">Fleece Jogger Pant</div><div class="catalog-ref">REF: YL-2025-JP-055</div></div></div>
        </div></div>
      </div>
      <div class="profile-tab-content" id="ptab-machines">
        <div class="section-card"><div class="section-title">Machine Park</div>
        <table class="machines-table"><thead><tr><th>Machine Type</th><th>Brand / Model</th><th>Qty</th><th>Capacity/Day</th><th>Specialty</th><th>Year</th></tr></thead>
        <tbody>
          <tr><td>Single Jersey Circular Knitting</td><td>Terrot S.K.S. 92</td><td>48</td><td>180 kg</td><td>Jersey, Piqué</td><td>2022</td></tr>
          <tr><td>Double Jersey Circular Knitting</td><td>Mayer & Cie RF3-S</td><td>24</td><td>120 kg</td><td>Interlock, Ponte</td><td>2021</td></tr>
          <tr><td>Flat Knitting</td><td>Stoll ADF 530-32 W</td><td>16</td><td>80 kg</td><td>Knitwear, Sweaters</td><td>2023</td></tr>
          <tr><td>Overlock Sewing</td><td>Juki MO-6800</td><td>120</td><td>2,400 pcs</td><td>Seaming</td><td>2022</td></tr>
          <tr><td>Digital Printing</td><td>Kornit Presto MAX</td><td>4</td><td>500 m²</td><td>All-over print</td><td>2024</td></tr>
          <tr><td>Embroidery</td><td>Tajima TMEG-G</td><td>12</td><td>1,200 pcs</td><td>Logo, Pattern</td><td>2022</td></tr>
          <tr><td>Dyeing (Continuous)</td><td>Thies iMaster</td><td>6</td><td>3,000 kg</td><td>Reactive, Disperse</td><td>2023</td></tr>
        </tbody></table></div>
      </div>
      <div class="profile-tab-content" id="ptab-clients">
        <div class="section-card"><div class="section-title">Current Clients — 127 Active Brands</div>
        <div class="clients-grid5">
          <div class="client-item"><div class="client-logo-ph">ZARA</div><div class="client-name">Zara</div></div>
          <div class="client-item"><div class="client-logo-ph">H&M</div><div class="client-name">H&M Group</div></div>
          <div class="client-item"><div class="client-logo-ph">GAP</div><div class="client-name">Gap Inc.</div></div>
          <div class="client-item"><div class="client-logo-ph">ASOS</div><div class="client-name">ASOS</div></div>
          <div class="client-item"><div class="client-logo-ph">MANGO</div><div class="client-name">Mango</div></div>
          <div class="client-item"><div class="client-logo-ph">NEXT</div><div class="client-name">Next</div></div>
          <div class="client-item"><div class="client-logo-ph">REISS</div><div class="client-name">Reiss</div></div>
          <div class="client-item"><div class="client-logo-ph">C&A</div><div class="client-name">C&A</div></div>
          <div class="client-item"><div class="client-logo-ph">M&S</div><div class="client-name">Marks & Spencer</div></div>
          <div class="client-item"><div class="client-logo-ph">ZARA</div><div class="client-name">+117 more</div></div>
        </div></div>
      </div>
      <div class="profile-tab-content" id="ptab-financial">
        <div class="profile-2col">
          <div class="section-card"><div class="section-title">Financial Overview</div>
            <div class="info-row"><span class="info-label">Annual Revenue</span><span class="info-value">$48M – $55M USD</span></div>
            <div class="info-row"><span class="info-label">Revenue Growth YoY</span><span class="info-value" style="color:var(--green)">+14.2%</span></div>
            <div class="info-row"><span class="info-label">Export Revenue</span><span class="info-value">$42M (86%)</span></div>
            <div class="info-row"><span class="info-label">Net Profit Margin</span><span class="info-value">8.4%</span></div>
            <div class="info-row"><span class="info-label">Credit Rating</span><span class="info-value">A+ (Verified)</span></div>
            <div class="info-row"><span class="info-label">Payment Terms</span><span class="info-value">30% deposit, 70% BL</span></div>
          </div>
          <div class="section-card"><div class="section-title">Pricing Indicators</div>
            <div class="info-row"><span class="info-label">Jersey T-Shirt (200 MOQ)</span><span class="info-value">$4.80–$7.20 FOB</span></div>
            <div class="info-row"><span class="info-label">Woven Shirt (200 MOQ)</span><span class="info-value">$8.50–$14.00 FOB</span></div>
            <div class="info-row"><span class="info-label">Knitwear (100 MOQ)</span><span class="info-value">$18–$32 FOB</span></div>
            <div class="info-row"><span class="info-label">Sampling Cost</span><span class="info-value">$80–$150/style</span></div>
          </div>
        </div>
      </div>
      <div class="profile-tab-content" id="ptab-sustainability">
        <div class="sustain-grid3">
          <div class="sustain-item"><div class="sustain-icon">🌿</div><div class="sustain-title">GOTS Certified</div><div class="sustain-desc">100% of organic cotton products certified since 2018.</div></div>
          <div class="sustain-item"><div class="sustain-icon">💧</div><div class="sustain-title">Water Recycling</div><div class="sustain-desc">85% of dyeing water recycled through closed-loop system.</div></div>
          <div class="sustain-item"><div class="sustain-icon">☀️</div><div class="sustain-title">Solar Energy</div><div class="sustain-desc">40% of electricity from rooftop solar. Target 80% by 2026.</div></div>
          <div class="sustain-item"><div class="sustain-icon">♻️</div><div class="sustain-title">Zero Waste</div><div class="sustain-desc">Fabric offcuts donated or recycled into insulation.</div></div>
          <div class="sustain-item"><div class="sustain-icon">👷</div><div class="sustain-title">SA8000 Social</div><div class="sustain-desc">Fair wages, no child labour, audited annually.</div></div>
          <div class="sustain-item"><div class="sustain-icon">📦</div><div class="sustain-title">Eco Packaging</div><div class="sustain-desc">100% recycled or biodegradable export packaging.</div></div>
        </div>
        <div class="section-card"><div class="section-title">ESG Score</div>
          <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:14px">
            <div><div style="font-size:10.5px;font-weight:600;color:var(--gray-600);margin-bottom:4px">Environmental</div><div class="progress-bar"><div class="progress-fill" style="width:82%"></div></div><div style="font-size:11px;font-weight:700;color:var(--green);margin-top:3px">82/100</div></div>
            <div><div style="font-size:10.5px;font-weight:600;color:var(--gray-600);margin-bottom:4px">Social</div><div class="progress-bar"><div class="progress-fill" style="width:91%"></div></div><div style="font-size:11px;font-weight:700;color:var(--green);margin-top:3px">91/100</div></div>
            <div><div style="font-size:10.5px;font-weight:600;color:var(--gray-600);margin-bottom:4px">Governance</div><div class="progress-bar"><div class="progress-fill" style="width:76%"></div></div><div style="font-size:11px;font-weight:700;color:var(--green);margin-top:3px">76/100</div></div>
            <div><div style="font-size:10.5px;font-weight:600;color:var(--gray-600);margin-bottom:4px">Overall ESG</div><div class="progress-bar"><div class="progress-fill" style="width:83%"></div></div><div style="font-size:11px;font-weight:700;color:var(--green);margin-top:3px">83/100</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════ MODULE 2: JOB ══════════ -->
<div class="module" id="mod-job">
  <!-- Grid View -->
  <div class="job-view active" id="jv-grid">
    <div class="page-header">JOB</div>
    <div style="padding:0 32px 32px">
      <div style="font-size:10.5px;font-weight:600;letter-spacing:0.08em;text-transform:uppercase;color:var(--gray-600);margin-bottom:12px">Find Your Dream Job</div>
      <div class="filters-bar">
        <div class="dropdown-wrapper"><button class="filter-btn" onclick="toggleDd('j-dd1')">Categories <span style="font-size:9px">▼</span></button><div class="dropdown-menu" id="j-dd1"><div class="dropdown-item">All</div><div class="dropdown-item">Retail</div><div class="dropdown-item">Sales</div><div class="dropdown-item">Design</div><div class="dropdown-item">Marketing</div></div></div>
        <div class="dropdown-wrapper"><button class="filter-btn" onclick="toggleDd('j-dd2')">Region <span style="font-size:9px">▼</span></button><div class="dropdown-menu" id="j-dd2"><div class="dropdown-item">All</div><div class="dropdown-item">Europe</div><div class="dropdown-item">Asia Pacific</div><div class="dropdown-item">Americas</div><div class="dropdown-item">Middle East</div></div></div>
        <div class="dropdown-wrapper"><button class="filter-btn" onclick="toggleDd('j-dd3')">Contract Type <span style="font-size:9px">▼</span></button><div class="dropdown-menu" id="j-dd3"><div class="dropdown-item">All</div><div class="dropdown-item">Full-Time</div><div class="dropdown-item">Internship</div><div class="dropdown-item">Freelance</div></div></div>
        <input class="keyword-input" type="text" placeholder="Keywords">
      </div>
      <div class="search-actions"><button class="btn-search" onclick="showJobView('jv-list')">Search</button><button class="btn-reset">Reset</button></div>
      <div class="advanced-toggle" onclick="toggleJobAdv()"><div class="adv-toggle-icon" id="j-adv-icon">+</div> Add Advanced Filters</div>
      <div class="adv-filters" id="j-adv-filters">
        <button class="filter-btn">Level <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Experience <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Availability <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Company <span style="font-size:9px">▼</span></button>
      </div>
      <div class="cards-grid-3">
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1529139574466-a303027c1d8b?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">Lidzcaps</div><div class="company-jobs">View 6 jobs</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">Jumbo</div><div class="company-jobs">View 9 jobs</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">Girault Roy</div><div class="company-jobs">View 2 jobs</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1487222477894-8943e31ef7b2?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">ACL</div><div class="company-jobs">View 1 job</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1511994298241-608e28f14fde?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">Yongli</div><div class="company-jobs">View 13 jobs</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">MPM</div><div class="company-jobs">View 5 jobs</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">Jin Zhi Xiang</div><div class="company-jobs">View 17 jobs</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1509631179647-0177331693ae?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">Malaika</div><div class="company-jobs">View 13 jobs</div></div></div>
        <div class="company-card" onclick="showJobView('jv-list')"><img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?w=400&h=200&fit=crop" alt=""><div class="company-card-overlay"><div class="company-name">Hometown</div><div class="company-jobs">View 8 jobs</div></div></div>
      </div>
      <div class="bottom-actions">
        <button class="btn-outline" onclick="showJobView('jv-list')">View All Jobs</button>
        <button class="btn-outline">View All Companies</button>
      </div>
    </div>
  </div>

  <!-- List View -->
  <div class="job-view" id="jv-list">
    <div class="page-header">JOB</div>
    <div style="padding:0 32px 32px">
      <div class="filters-bar" style="margin-bottom:10px">
        <button class="filter-btn">Categories <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Region <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Contract Type <span style="font-size:9px">▼</span></button>
        <input class="keyword-input" type="text" placeholder="Keywords">
      </div>
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px">
        <div class="active-tag">Design <span onclick="this.parentElement.remove()">×</span></div>
        <div class="active-tag">London <span onclick="this.parentElement.remove()">×</span></div>
        <button class="btn-reset" style="margin-left:auto">Reset</button>
      </div>
      <div class="advanced-toggle"><div class="adv-toggle-icon">−</div> Add Advanced Filters</div>
      <div class="filters-bar" style="margin-bottom:18px">
        <button class="filter-btn">Level <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Experience <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Availability <span style="font-size:9px">▼</span></button>
        <button class="filter-btn">Company <span style="font-size:9px">▼</span></button>
      </div>
      <div class="results-count">300 Job Offers</div>
      <div class="job-list">
        <div class="job-item" onclick="showJobDetail('Graphic Designer','Girault Roy','GR','Permanent','London, England','Design','Full-Time','ASAP','English/French')"><div class="job-logo">GR</div><div class="job-info"><div class="job-co">Girault Roy</div><div class="job-title-link">Graphic Designer</div><div class="job-meta">25/02 · Permanent · London · Entry Level</div></div></div>
        <div class="job-item" onclick="showJobDetail('Senior Women's Accessories Designer','Girault Roy','GR','Permanent','London, England','Design','Full-Time','ASAP','English/French')"><div class="job-logo">GR</div><div class="job-info"><div class="job-co">Girault Roy</div><div class="job-title-link">Senior Women's Accessories Designer</div><div class="job-meta">01/02 · Full-Time · London · Executive / Coordinator</div></div></div>
        <div class="job-item" onclick="showJobDetail('Design & Product Development Associate','Hometown','HT','Permanent','London, England','Design','Full-Time','ASAP','English')"><div class="job-logo" style="color:#003d99">HT</div><div class="job-info"><div class="job-co">Hometown</div><div class="job-title-link">Design & Product Development Associate</div><div class="job-meta">26/01 · Full-Time · London · Entry Level</div></div></div>
        <div class="job-item" onclick="showJobDetail('CAD Designer','Hometown','HT','Permanent','London, England','Design','Full-Time','ASAP','English')"><div class="job-logo" style="color:#003d99">HT</div><div class="job-info"><div class="job-co">Hometown</div><div class="job-title-link">CAD Designer</div><div class="job-meta">06/01 · Full-Time · London · Coordinator</div></div></div>
        <div class="job-item" onclick="showJobDetail('Knitwear Designer','Hometown','HT','Permanent','London, England','Design','Full-Time','ASAP','English')"><div class="job-logo" style="color:#003d99">HT</div><div class="job-info"><div class="job-co">Hometown</div><div class="job-title-link">Knitwear Designer</div><div class="job-meta">02/01 · Full-Time · London · Manager</div></div></div>
        <div class="job-item" onclick="showJobDetail('Senior Women's Accessories Designer','Yongli','YL','Permanent','London, England','Design','Full-Time','ASAP','English')"><div class="job-logo" style="color:#1a4a8a">YL</div><div class="job-info"><div class="job-co">Yongli</div><div class="job-title-link">Senior Women's Accessories Designer</div><div class="job-meta">17/02 · Full-Time · London · Coordinator</div></div></div>
        <div class="job-item" onclick="showJobDetail('Graphic Design Coordinator','Yongli','YL','Permanent','London, England','Design','Full-Time','ASAP','English')"><div class="job-logo" style="color:#1a4a8a">YL</div><div class="job-info"><div class="job-co">Yongli</div><div class="job-title-link">Graphic Design Coordinator for Menswear</div><div class="job-meta">15/02 · Full-Time · London · Senior Manager</div></div></div>
      </div>
      <div style="margin-top:14px"><button class="btn-back" onclick="showJobView('jv-grid')">← Back to Companies</button></div>
      <div class="pagination"><span>Results 1–7 of 300</span><div class="pagination-pages"><div class="page-arrow">‹</div><div class="page-num active">1</div><div class="page-num">2</div><div class="page-num">3</div><div class="page-arrow">›</div></div></div>
    </div>
  </div>

  <!-- Detail View -->
    <div class="job-view" id="jv-detail">
    <div style="padding:24px 32px 40px;max-width:1100px;margin:0 auto">

      <!-- Top bar -->
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px">
        <button class="btn-back" onclick="showJobView('jv-list')">← Back to Results</button>
        <button class="btn-apply">Apply Now</button>
      </div>

      <!-- Job title banner -->
      <div class="section-card" style="text-align:center;padding:18px 24px;margin-bottom:20px">
        <div class="job-detail-title" id="jd-title" style="margin-bottom:0">Senior Women's Accessories Designer</div>
      </div>

      <!-- Company header: logo + name + location -->
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding:0 4px">
        <div style="display:flex;align-items:center;gap:14px">
          <div id="jd-logo" style="width:52px;height:52px;border-radius:10px;background:var(--purple);display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:800;color:white;letter-spacing:.04em;flex-shrink:0">GR</div>
          <div>
            <div id="jd-company" style="font-size:13px;font-weight:700;letter-spacing:.06em;text-transform:uppercase;color:var(--gray-800)">Girault Roy</div>
            <div id="jd-loc-sub" style="font-size:11px;color:var(--gray-400);margin-top:2px">📍 London, England</div>
          </div>
        </div>
        <button class="btn-apply">Apply Now</button>
      </div>

      <!-- Details — pleine largeur, champs en grille 4 colonnes -->
      <div class="section-card" style="padding:20px 24px;margin-bottom:16px">
        <div class="detail-card-title">Details</div>
        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px 24px;margin-top:4px">
          <div class="detail-field" style="margin-bottom:0"><div class="detail-field-label">Job Title</div><div class="detail-field-value" id="jd-f-title">-</div></div>
          <div class="detail-field" style="margin-bottom:0"><div class="detail-field-label">Location</div><div class="detail-field-value" id="jd-f-loc">-</div></div>
          <div class="detail-field" style="margin-bottom:0"><div class="detail-field-label">Function</div><div class="detail-field-value" id="jd-f-func">-</div></div>
          <div class="detail-field" style="margin-bottom:0"><div class="detail-field-label">Job Type</div><div class="detail-field-value" id="jd-f-type">-</div></div>
          <div class="detail-field" style="margin-bottom:0"><div class="detail-field-label">Contract</div><div class="detail-field-value" id="jd-f-contract">-</div></div>
          <div class="detail-field" style="margin-bottom:0"><div class="detail-field-label">Start Date</div><div class="detail-field-value" id="jd-f-start">-</div></div>
          <div class="detail-field" style="margin-bottom:0"><div class="detail-field-label">Language</div><div class="detail-field-value" id="jd-f-lang">-</div></div>
        </div>
      </div>

      <!-- Description — pleine largeur -->
      <div class="section-card" style="padding:20px 24px;margin-bottom:16px">
        <div class="detail-card-title">Description</div>
        <div class="detail-desc">
          <p>We are looking for a highly creative and experienced designer to join our dynamic team. The successful candidate will be responsible for designing and developing collections that are innovative, on-trend, and aligned with the brand's aesthetic vision.</p>
          <p>You will lead the creative process from initial concept through to final product, collaborating closely with product development, sourcing, and merchandising teams to ensure collections are delivered on time and within budget.</p>
          <p>The ideal candidate will have a strong portfolio demonstrating exceptional design skills, experience working with luxury or premium brands, and the ability to work effectively in a fast-paced environment.</p>
        </div>
      </div>

      <!-- Ideal Candidate -->
      <div class="section-card" style="margin-bottom:16px;padding:20px 24px">
        <div class="detail-card-title">The Ideal Candidate</div>
        <ul class="candidate-list">
          <li>3 to 5 years of experience as a Designer in a premium brand in the Fashion Industry.</li>
          <li>Orientation towards luxury and high quality materials.</li>
          <li>Knowledge and sensitivity for the brand's product and ability to meet the brand's style requirements.</li>
        </ul>
      </div>

      <!-- About Us -->
      <div class="section-card" style="margin-bottom:24px;padding:20px 24px">
        <div class="detail-card-title">About Us</div>
        <p class="detail-desc">We are a leading luxury fashion house with a commitment to exceptional craftsmanship, innovative design, and sustainable practices. Our team of talented designers, artisans, and industry professionals work together to create collections that define contemporary luxury.</p>
      </div>

      <!-- Bottom bar -->
      <div style="display:flex;justify-content:space-between;align-items:center">
        <button class="btn-back" onclick="showJobView('jv-list')">← Back</button>
        <button class="btn-apply">Apply Now</button>
      </div>
    </div>
  </div>

<!-- ══════════ MODULE 4: STOCK ══════════ -->
<div class="module" id="mod-stock">
  <div class="stock-view active" id="stv-grid">
    <div style="padding:24px 24px 0;font-size:20px;font-weight:700;letter-spacing:0.12em;text-transform:uppercase;text-align:center;color:var(--gray-800)">STOCK</div>
    <div style="height:16px"></div>
    <div class="stock-filter-section">
      <div class="stock-filter-row">
        <div class="stock-filter-toggle" onclick="toggleStockAdv()"><div class="stock-toggle-icon" id="st-adv-icon">−</div> Add Filters</div>
        <button class="cat-pill active" onclick="setCat(this)">Yarn</button>
        <button class="cat-pill" onclick="setCat(this)">Fabric</button>
        <button class="cat-pill" onclick="setCat(this)">Trim & Accessories</button>
        <button class="cat-pill" onclick="setCat(this)">Packaging</button>
        <button class="cat-pill" onclick="setCat(this)">Finished Goods</button>
        <button class="btn-reset" style="margin-left:auto">Reset</button>
      </div>
    </div>
    <div class="adv-filter-bar" id="st-adv-filters">
      <div class="stock-filter-row" style="margin-bottom:8px"><div class="stock-filter-toggle" style="color:var(--gray-400)"><div class="stock-toggle-icon">−</div> Advanced Filters</div><button class="btn-reset">Reset</button></div>
      <div class="stock-filter-row">
        <select class="select-filter"><option>Fibre Type</option><option>Natural</option><option>Synthetic</option><option>Recycled</option></select>
        <select class="select-filter"><option>Country of Origin</option><option>China</option><option>Italy</option><option>India</option><option>France</option></select>
        <select class="select-filter"><option>Colour Family</option><option>Neutrals</option><option>Blues</option><option>Greens</option><option>Reds</option></select>
        <select class="select-filter"><option>Weight / Count</option><option>Fine</option><option>Medium</option><option>Chunky</option></select>
        <select class="select-filter"><option>Min. Quantity</option><option>Any</option><option>< 100 kg</option><option>100–500 kg</option></select>
        <select class="select-filter"><option>Price Range</option><option>Under 5 €</option><option>5–15 €</option><option>15–30 €</option></select>
      </div>
    </div>
    <div style="padding:16px 24px 6px;font-size:11.5px;font-weight:700;letter-spacing:0.06em;text-transform:uppercase;color:var(--gray-800)">Tous les articles</div>
    <div class="product-grid4">
      <div class="product-card" onclick="showStockDetail(0)"><div class="product-img"><img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=300&h=300&fit=crop&sat=-80" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil de fibre 100 % aloe vera sur cône, pour tricot à la machine...</div><div class="product-price">8,50 €</div></div></div>
      <div class="product-card" onclick="showStockDetail(1)"><div class="product-img"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=300&fit=crop" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil de lin 100 % sur le cône, pour 1 kg, fils naturels non traités...</div><div class="product-price">5,00 €</div></div></div>
      <div class="product-card" onclick="showStockDetail(2)"><div class="product-img"><img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=300&fit=crop" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">100% fil de soie tussah sur cône, qualité luxe, brillant naturel...</div><div class="product-price">9,80 €</div></div></div>
      <div class="product-card" onclick="showStockDetail(3)"><div class="product-img"><img src="https://images.unsplash.com/photo-1605518216938-7c31b7b14ad0?w=300&h=300&fit=crop" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil d'alpaga/silk/cotton sur cône, mélange luxe douceur supérieure...</div><div class="product-price">6,00 €</div></div></div>
      <div class="product-card" onclick="showStockDetail(4)"><div class="product-img"><img src="https://images.unsplash.com/photo-1619413526629-b58edba0c4f0?w=300&h=300&fit=crop" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil flou en cachemire sur cône, extra soft, lot de déstockage...</div><div class="product-price">14,00 €</div></div></div>
      <div class="product-card" onclick="showStockDetail(5)"><div class="product-img"><img src="https://images.unsplash.com/photo-1598527520472-1b86e5edd6cb?w=300&h=300&fit=crop" alt=""></div><div class="wishlist-btn">♡</div><div class="free-badge">Livraison GRATUITE</div><div class="product-info"><div class="product-name">Fil 100 % laine mérinos sur cône, qualité premium superwash...</div><div class="product-price">61,00 €</div></div></div>
      <div class="product-card" onclick="showStockDetail(6)"><div class="product-img"><img src="https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=300&h=300&fit=crop" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fils de soie de mûrier 100 % sur cône, qualité A-grade...</div><div class="product-price">8,00 €</div><div class="social-proof neutral">5 personnes font leur panier.</div></div></div>
      <div class="product-card" onclick="showStockDetail(7)"><div class="product-img"><img src="https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=300&h=300&fit=crop&hue=340" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil de cachemire et soie, rouge carmin, lot unique 380 kg...</div><div class="product-price">13,50 €</div><div class="social-proof">6 personnes font leur panier.</div></div></div>
      <div class="product-card" onclick="showStockDetail(8)"><div class="product-img"><img src="https://images.unsplash.com/photo-1605518216938-7c31b7b14ad0?w=300&h=300&fit=crop&hue=280" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil nylon recyclé Econyl sur cône, certifié GRS, marine...</div><div class="product-price">4,50 €</div><div class="social-proof neutral">2 personnes font leur panier.</div></div></div>
      <div class="product-card" onclick="showStockDetail(9)"><div class="product-img"><img src="https://images.unsplash.com/photo-1619413526629-b58edba0c4f0?w=300&h=300&fit=crop&hue=60" alt=""></div><div class="wishlist-btn">♡</div><div class="free-badge">Livraison GRATUITE</div><div class="product-info"><div class="product-name">Fil mohair kid luxe, 70% kid mohair 30% soie, bleu ciel...</div><div class="product-price">22,00 €</div></div></div>
      <div class="product-card" onclick="showStockDetail(10)"><div class="product-img"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=300&fit=crop&hue=220" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil coton mercerisé 100%, Nm 50/2, lustre soyeux, écru...</div><div class="product-price">3,80 €</div><div class="social-proof">11 personnes font leur panier.</div></div></div>
      <div class="product-card" onclick="showStockDetail(11)"><div class="product-img"><img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=300&h=300&fit=crop&hue=120" alt=""></div><div class="wishlist-btn">♡</div><div class="product-info"><div class="product-name">Fil bambou/soie sur cône, mélange 70/30 brillant naturel...</div><div class="product-price">7,20 €</div></div></div>
    </div>
  </div>

  <!-- Stock Detail View -->
  <div class="stock-view" id="stv-detail">
    <div class="detail-layout">
      <div class="detail-images">
        <img class="detail-main-img" id="st-main-img" src="" alt="">
        <div class="detail-thumbs" id="st-thumbs"></div>
      </div>
      <div class="detail-info">
        <div class="btn-back-detail" style="display:flex;align-items:center;gap:5px;font-size:10.5px;font-weight:600;letter-spacing:0.06em;text-transform:uppercase;color:var(--gray-400);cursor:pointer;margin-bottom:14px" onclick="showStockView('stv-grid')">← Retour aux résultats</div>
        <div class="detail-seller" id="st-seller">Yongli Textiles</div>
        <div class="detail-name" id="st-name">Fil de fibre 100 % aloe vera</div>
        <div class="stock-badge"><span class="stock-dot"></span> En stock — <span id="st-stock">2 400 kg disponibles</span></div>
        <div style="display:flex;align-items:baseline;gap:8px;margin-bottom:5px"><div class="detail-price" id="st-price">8,50 €</div><div class="detail-unit">/ kg · Prix FOB</div></div>
        <div style="font-size:10.5px;color:var(--green);font-weight:600;margin-bottom:14px" id="st-shipping">✓ Livraison gratuite à partir de 500 kg</div>
        <div style="font-size:10px;color:var(--red);font-weight:500;margin-bottom:14px" id="st-social"></div>
        <div class="detail-divider"></div>
        <div id="st-specs"></div>
        <div class="detail-divider"></div>
        <div class="qty-row">
          <span class="qty-label">Quantité (kg)</span>
          <div class="qty-ctrl">
            <button class="qty-btn" onclick="stQty(-10)">−</button>
            <input class="qty-val" type="number" id="st-qty" value="100" min="10">
            <button class="qty-btn" onclick="stQty(10)">+</button>
          </div>
          <span style="font-size:10px;color:var(--gray-400);font-weight:500">MOQ: <span id="st-moq">50 kg</span></span>
        </div>
        <button class="btn-cart" onclick="addCart()">🛒 Ajouter au panier</button>
        <button class="btn-rfq">📋 Demander un devis (RFQ)</button>
        <div class="seller-box">
          <div class="seller-avatar" id="st-s-avatar">YL</div>
          <div><div class="seller-name" id="st-s-name">Yongli Textiles Co., Ltd.</div><div class="seller-rating">★★★★★ 4.8</div><div class="seller-meta">127 transactions · Vérifié</div></div>
          <button class="btn-contact-seller">Contacter</button>
        </div>
        <div style="background:var(--green-bg);border-radius:8px;padding:11px 13px;font-size:10.5px;color:#1a9965;font-weight:500;line-height:1.6">🌿 Ce lot est issu d'un déstockage certifié. En l'achetant, vous contribuez à une mode plus circulaire.</div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════ WE HELP THE PLANET ══════════ -->
<div class="module" id="mod-planet">
  <div class="planet-hero"><img src="https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=1200&h=500&fit=crop&q=85" alt="Children"></div>
  <div class="planet-content">
    <h1 class="planet-title">We Help The Planet</h1>
    <p class="planet-body">Fashion Sourcing is environment conscious and wants to participate in many initiatives. Together and through a participation from your subscription, we help the planet.</p>
    <p class="planet-body">Every year we will choose 2/3 foundations and split our donations among selected projects.</p>
    <p class="planet-body">We will establish a detailed report at the end of each year.</p>
    <div class="wordcloud-wrap">
      <div class="wordcloud">
        <span class="word xs">Environment</span><span class="word lg">Education</span><span class="word sm">Initiatives</span><span class="word sm">Contribution</span><span class="word md">Cooperation</span><span class="word xs">Wastage</span><span class="word xs">Poverty</span><span class="word lg">Need</span><span class="word xl">World</span><span class="word lg">Green</span><span class="word sm">Ecological</span><span class="word sm">Recycling</span><span class="word xs">Sustainability</span><span class="word md">Biodiversity</span><span class="word md">Water</span><span class="word sm">Earth</span><span class="word lg">Nature</span><span class="word sm">Animals</span><span class="word md">Plant</span><span class="word sm">Health</span><span class="word xs">Eco Friendly</span><span class="word md">Protection</span><span class="word xs">Fewer Chemicals</span>
      </div>
    </div>
  </div>
  <div class="planet-initiatives">
    <div class="init-card"><span class="init-icon">🌍</span><div class="init-title">Environmental Protection</div><div class="init-desc">We support projects fighting deforestation, ocean pollution, and biodiversity loss.</div></div>
    <div class="init-card"><span class="init-icon">📚</span><div class="init-title">Education & Training</div><div class="init-desc">We fund access to education for children in garment-producing regions worldwide.</div></div>
    <div class="init-card"><span class="init-icon">♻️</span><div class="init-title">Circular Economy</div><div class="init-desc">We promote recycling programs for dormant textile stocks — turning surplus into value.</div></div>
  </div>
  <div class="planet-impact">
    <div class="impact-label-top">Our Collective Impact — 2024</div>
    <div class="impact-grid">
      <div class="impact-stat"><div class="impact-number">€124K</div><div class="impact-sublabel">Donated to date</div></div>
      <div class="impact-stat"><div class="impact-number">3</div><div class="impact-sublabel">Foundations</div></div>
      <div class="impact-stat"><div class="impact-number">12K</div><div class="impact-sublabel">Lives impacted</div></div>
      <div class="impact-stat"><div class="impact-number">48T</div><div class="impact-sublabel">Waste avoided</div></div>
    </div>
  </div>
  <div class="planet-foundations">
    <div class="found-title">2024 Selected Foundations</div>
    <div class="found-sub">Every year, our community votes to select 2 or 3 foundations. Here are this year's choices.</div>
    <div class="found-grid">
      <div class="found-card"><img class="found-img" src="https://images.unsplash.com/photo-1594708767771-a7502209ff51?w=400&h=200&fit=crop" alt=""><div class="found-body"><div class="found-name">Clean Water for All</div><div class="found-focus">🌊 Water & Sanitation</div><div class="found-desc">Providing clean water access to communities affected by textile dyeing pollution in Asia.</div></div></div>
      <div class="found-card"><img class="found-img" src="https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=400&h=200&fit=crop" alt=""><div class="found-body"><div class="found-name">Educate to Empower</div><div class="found-focus">📚 Education</div><div class="found-desc">Building schools and funding scholarships for children of garment workers.</div></div></div>
      <div class="found-card"><img class="found-img" src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=200&fit=crop" alt=""><div class="found-body"><div class="found-name">Reforest the Future</div><div class="found-focus">🌿 Biodiversity</div><div class="found-desc">Planting trees in regions devastated by cotton monoculture.</div></div></div>
    </div>
  </div>
  <div class="planet-cta">
    <p>Every subscription contributes automatically. We publish a full transparency report each year.</p>
    <button class="btn-purple">Download 2023 Report</button>
    <button class="btn-outline-p">Vote for 2025 Foundations</button>
  </div>
  <div class="pf">
    <div class="pf-grid">
      <div><div class="pf-logo"><svg width="22" height="22" viewBox="0 0 40 40" fill="none"><circle cx="20" cy="20" r="16" stroke="#7B6FD0" stroke-width="2"/><circle cx="20" cy="20" r="8" stroke="#7B6FD0" stroke-width="1.5"/><line x1="20" y1="4" x2="20" y2="36" stroke="#7B6FD0" stroke-width="1.5"/><line x1="4" y1="20" x2="36" y2="20" stroke="#7B6FD0" stroke-width="1.5"/></svg><span class="pf-logo-text">Fashion Sourcing</span></div><button class="pf-tagbtn">Meet the Standard</button></div>
      <div><div class="pf-col-title">Address</div><div class="pf-address">98 Rue de Longchamp,<br>75116 Paris, France</div><button class="pf-contact-btn">Contact Us</button><div class="pf-col-title" style="margin-top:14px">Social</div><div class="pf-social"><div class="pf-social-icon">f</div><div class="pf-social-icon">ig</div><div class="pf-social-icon">▶</div><div class="pf-social-icon">in</div></div></div>
      <div><div class="pf-col-title">Explore</div><ul class="pf-links"><li><a href="#">Home</a></li><li><a href="#">Pricing</a></li><li><a href="#">Mission</a></li><li><a href="#">We Help The Planet</a></li><li><a href="#">Partners</a></li></ul></div>
      <div><div class="pf-col-title">Legal</div><ul class="pf-links"><li><a href="#">Terms</a></li><li><a href="#">Policy</a></li><li><a href="#">Copyright</a></li></ul></div>
    </div>
    <div class="pf-bottom">Copyright Fashion Sourcing 2018</div>
  </div>
</div>


<!-- ══════════ MODULE: MAPPING ══════════ -->
<div class="module" <div class="module" id="mod-mapping">

  <!-- Header -->
  <div style="padding:24px 32px 0">
    <div style="font-size:11px;font-weight:700;letter-spacing:.14em;color:#7B6FD0;text-transform:uppercase;margin-bottom:4px">Global Network</div>
    <div style="font-size:22px;font-weight:800;color:#1a1a2e;letter-spacing:.06em;text-transform:uppercase">MAPPING</div>
  </div>

  <!-- Filtres ligne 1 -->
  <div style="padding:16px 32px 0;display:flex;gap:8px;flex-wrap:wrap;align-items:center">
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">MATERIAL TYPE <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">SECTOR(S) <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">PRODUCT FAMILY <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">PRODUCT TYPE <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">QUALITY RANGE <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">LOCATION <span style="font-size:9px">▾</span></div>
    <div style="margin-left:auto;padding:7px 16px;background:#7B6FD0;color:white;border-radius:6px;font-size:11px;font-weight:700;letter-spacing:.06em">RESET</div>
  </div>

  <!-- Filtres ligne 2 -->
  <div style="padding:8px 32px 16px;display:flex;gap:8px;flex-wrap:wrap">
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">SPECIFICATION 1 <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">SPECIFICATION 2 <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">SPECIFICATION 3 <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">MIN QUANTITY <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">MAX QUANTITY <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">CERTIFICATION <span style="font-size:9px">▾</span></div>
    <div style="display:flex;align-items:center;gap:6px;padding:7px 12px;border:1.5px solid #ddd;border-radius:6px;font-size:11px;font-weight:600;color:#444;background:white">STOCK SERVICE <span style="font-size:9px">▾</span></div>
  </div>

  <!-- Carte SVG monde sombre + pins intégrés -->
  <div style="margin:0 32px 32px;border-radius:12px;overflow:hidden">
    <svg viewBox="0 0 1000 500" style="width:100%;display:block;background:#1a1a2e" xmlns="http://www.w3.org/2000/svg">

      <!-- Grille -->
      <line x1="0" y1="166" x2="1000" y2="166" stroke="#ffffff08" stroke-width="0.5"/>
      <line x1="0" y1="250" x2="1000" y2="250" stroke="#ffffff15" stroke-width="0.5"/>
      <line x1="0" y1="333" x2="1000" y2="333" stroke="#ffffff08" stroke-width="0.5"/>
      <line x1="250" y1="0" x2="250" y2="500" stroke="#ffffff08" stroke-width="0.5"/>
      <line x1="500" y1="0" x2="500" y2="500" stroke="#ffffff08" stroke-width="0.5"/>
      <line x1="750" y1="0" x2="750" y2="500" stroke="#ffffff08" stroke-width="0.5"/>

      <!-- Amérique du Nord -->
      <path d="M80,60 L145,52 L175,62 L192,80 L200,105 L215,115 L222,135 L215,155 L198,163 L182,158 L168,168 L152,172 L138,162 L122,167 L107,157 L92,142 L78,122 L68,98 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <path d="M52,48 L80,44 L92,55 L80,66 L56,64 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Mexique -->
      <path d="M152,172 L178,177 L188,193 L180,208 L164,213 L153,202 L146,187 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Amérique du Sud -->
      <path d="M182,213 L218,208 L242,218 L258,240 L266,268 L260,298 L247,322 L228,337 L208,332 L193,311 L184,282 L176,257 L178,232 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Groenland -->
      <path d="M208,28 L252,22 L268,36 L257,54 L228,60 L208,48 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Europe -->
      <path d="M452,92 L478,85 L502,89 L518,103 L512,118 L497,126 L478,123 L460,113 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Scandinavie -->
      <path d="M472,65 L494,58 L512,67 L507,82 L488,88 L470,80 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Islande -->
      <path d="M388,58 L405,53 L415,62 L405,70 L390,66 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Russie -->
      <path d="M488,58 L605,50 L682,57 L725,70 L732,85 L702,98 L650,103 L592,98 L533,93 L508,82 L492,68 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Turquie -->
      <path d="M518,115 L562,108 L588,115 L592,130 L572,140 L540,138 L516,130 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Moyen-Orient -->
      <path d="M560,132 L600,128 L618,142 L612,162 L588,168 L562,158 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Afrique nord -->
      <path d="M452,133 L548,128 L568,143 L562,172 L532,182 L490,184 L453,177 L440,158 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Afrique sub-saharienne -->
      <path d="M458,182 L532,180 L558,197 L563,228 L548,263 L522,288 L498,290 L476,270 L460,242 L450,212 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Madagascar -->
      <path d="M 558,248 L 567,242 L 572,258 L 562,272 L 553,262 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Asie centrale -->
      <path d="M 562,103 L 652,98 L 682,110 L 687,127 L 662,138 L 620,143 L 587,137 L 563,122 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Inde -->
      <path d="M 625,140 L 658,136 L 672,153 L 668,178 L 651,200 L 633,197 L 620,177 L 618,155 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Sri Lanka -->
      <path d="M 652,203 L 658,198 L 662,207 L 655,212 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Chine -->
      <path d="M 682,82 L 762,78 L 803,88 L 815,108 L 802,128 L 772,138 L 730,133 L 696,123 L 680,108 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Asie du SE -->
      <path d="M 732,136 L 778,130 L 797,148 L 792,170 L 763,180 L 733,170 L 727,152 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Philippines -->
      <path d="M 800,155 L 812,148 L 820,158 L 810,168 L 798,162 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Japon -->
      <path d="M 810,95 L 822,88 L 830,98 L 822,110 L 810,106 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Corée -->
      <path d="M 792,102 L 806,97 L 812,107 L 802,116 L 788,110 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Australie -->
      <path d="M 782,288 L 847,280 L 872,297 L 870,328 L 847,346 L 812,343 L 784,320 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- Nouvelle-Zélande -->
      <path d="M 880,332 L 890,325 L 895,338 L 883,346 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>
      <!-- UK/Irlande -->
      <path d="M 448,82 L 460,77 L 466,87 L 457,95 L 447,90 Z" fill="#2d2d50" stroke="#4a4a7a" stroke-width="0.6"/>

      <!-- PINS fournisseurs intégrés directement dans le SVG -->
      
  <!-- Yongli Textiles -->
  <g transform="translate(814.6,185.8)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Yongli Textiles — Guangzhou</title>
  </g>
  <!-- MPM Textiles -->
  <g transform="translate(580.4,136.1)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>MPM Textiles — Istanbul</title>
  </g>
  <!-- Atelier Tessile -->
  <g transform="translate(525.2,122.8)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Atelier Tessile — Como</title>
  </g>
  <!-- Jin Zhi Xiang -->
  <g transform="translate(833.8,166.0)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Jin Zhi Xiang — Hangzhou</title>
  </g>
  <!-- Malaika Crafts -->
  <g transform="translate(478.9,156.7)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Malaika Crafts — Casablanca</title>
  </g>
  <!-- LidZcaps MFG -->
  <g transform="translate(476.1,135.7)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>LidZcaps MFG — Porto</title>
  </g>
  <!-- Sunrise Textiles -->
  <g transform="translate(702.4,197.0)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Sunrise Textiles — Mumbai</title>
  </g>
  <!-- LuxeBox Paris -->
  <g transform="translate(506.5,114.3)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>LuxeBox Paris — Paris</title>
  </g>
  <!-- Riri Zipper -->
  <g transform="translate(524.9,122.6)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Riri Zipper — Mendrisio</title>
  </g>
  <!-- EcoThread -->
  <g transform="translate(513.6,104.5)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>EcoThread — Amsterdam</title>
  </g>
  <!-- Pacific Knit -->
  <g transform="translate(796.2,219.9)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Pacific Knit — Ho Chi Minh</title>
  </g>
  <!-- Atlas Leather -->
  <g transform="translate(477.8,162.1)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Atlas Leather — Marrakech</title>
  </g>
  <!-- Seoul Fashion -->
  <g transform="translate(852.7,145.6)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Seoul Fashion — Seoul</title>
  </g>
  <!-- Texgroup -->
  <g transform="translate(294.4,136.9)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Texgroup — New York</title>
  </g>
  <!-- Textil Barna -->
  <g transform="translate(506.0,135.1)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Textil Barna — Barcelona</title>
  </g>
  <!-- Fabrics East -->
  <g transform="translate(888.0,150.9)" style="cursor:pointer">
    <path d="M0,-14 C-5,-14 -9,-10 -9,-5 C-9,2 0,12 0,12 C0,12 9,2 9,-5 C9,-10 5,-14 0,-14 Z" fill="#7B6FD0" stroke="#5a4fc0" stroke-width="0.8"/>
    <circle cx="0" cy="-5" r="3.5" fill="white"/>
    <title>Fabrics East — Tokyo</title>
  </g>

    </svg>
  </div>

</div>

  <div class="map-filters-wrap">
    <div class="map-filter-row">
      <div class="map-filter-toggle"><div class="map-filter-toggle-icon">−</div> Add Filters</div>
      <select class="map-select-filter"><option>Select One</option><option>Material</option><option>Component</option><option>Manufacturer</option><option>Expert</option></select>
      <select class="map-select-filter"><option>Select One</option><option>Europe</option><option>Asia Pacific</option><option>South Asia</option><option>Africa &amp; M-E</option><option>Americas</option></select>
      <select class="map-select-filter"><option>Select One</option><option>Woven Fabrics</option><option>Knitwear</option><option>Leather</option><option>Accessories</option><option>Denim</option></select>
      <select class="map-select-filter"><option>Select One</option><option>GOTS</option><option>OEKO-TEX</option><option>ISO 9001</option><option>Fair Trade</option><option>B Corp</option></select>
      <select class="map-select-filter"><option>Select One</option><option>Under 50 pcs</option><option>50–200 pcs</option><option>200–500 pcs</option><option>500+ pcs</option></select>
      <select class="map-select-filter"><option>Select One</option><option>A (Verified)</option><option>B (Standard)</option><option>C (New)</option></select>
      <button class="map-btn-reset">Reset</button>
    </div>
    <div class="map-filter-row">
      <div class="map-filter-toggle" style="color:var(--gray-400)"><div class="map-filter-toggle-icon">−</div> Add Advanced Filters</div>
      <select class="map-select-filter"><option>Select One</option><option>China</option><option>Italy</option><option>Portugal</option><option>India</option><option>Turkey</option><option>Morocco</option><option>Vietnam</option></select>
      <select class="map-select-filter"><option>Select One</option><option>Under $5 FOB</option><option>$5–$15 FOB</option><option>$15–$30 FOB</option><option>$30+ FOB</option></select>
      <select class="map-select-filter"><option>Select One</option><option>&lt; 50 employees</option><option>50–200</option><option>200–500</option><option>500+</option></select>
      <select class="map-select-filter"><option>Select One</option><option>&lt; 30 days</option><option>30–60 days</option><option>60–90 days</option></select>
      <select class="map-select-filter"><option>Select One</option><option>Immediate</option><option>Under 2 weeks</option><option>Under 1 month</option></select>
      <select class="map-select-filter"><option>Select One</option><option>USD</option><option>EUR</option><option>GBP</option></select>
      <button class="map-btn-reset">Reset</button>
    </div>
    <div class="map-filter-row">
      <select class="map-select-filter"><option>Select One</option><option>Active</option><option>New (&lt; 6 months)</option><option>Premium</option></select>
    </div>
  </div>

  <div id="map-leaflet-container" style="flex:1;position:relative;overflow:hidden;min-height:400px">
    <div id="leaflet-map" style="width:100%;height:100%;"></div>
  </div>

</div>

<!-- ══════════ MODULE: TREND GALLERY ══════════ -->
<div class="module" <div class="module" id="mod-trendgallery">
  <div class="page-header">TREND GALLERY</div>
  <div style="padding:0 32px 32px">
    <div class="tab-nav" style="margin-top:20px">
      <button class="tab-btn active" onclick="tgTab(this)">Materials</button>
      <button class="tab-btn" onclick="tgTab(this)">Components</button>
      <button class="tab-btn" onclick="tgTab(this)">Products</button>
      <button class="tab-btn" onclick="tgTab(this)">Packaging</button>
    </div>
    
  </div>
</div>
</div>

</main>
</body>
<script>
// ── NAVIGATION ──
let cartCount = 0;
const modules = ['dashboard','search','job','stock','planet','mapping','trendgallery'];

function navigate(mod) {
  modules.forEach(function(m) {
    var el = document.getElementById('mod-'+m);
    if(el) el.classList.remove('active');
    var nav = document.getElementById('nav-'+m);
    if(nav) nav.classList.remove('active');
  });
  document.querySelectorAll('.nav-sub-item').forEach(function(i){ i.classList.remove('active'); });
  var modEl = document.getElementById('mod-'+mod);
  if(modEl) modEl.classList.add('active');
  var navEl = document.getElementById('nav-'+mod);
  if(navEl) navEl.classList.add('active');
  var mc = document.getElementById('main-content');
  if(mc) mc.scrollTop = 0;
  if(mod === 'search') { switchSearchTab('manufacturer'); }
  if(mod === 'mapping') { initMappingModule(); }
  if(mod === 'dashboard') { setTimeout(function(){ tryInitDashMap(); }, 100); }
}

// ── DROPDOWNS ──
function toggleDd(id) {
  document.querySelectorAll('.dropdown-menu').forEach(d => { if(d.id!==id) d.classList.remove('open'); });
  document.getElementById(id).classList.toggle('open');
}
document.addEventListener('click', e => { if(!e.target.closest('.dropdown-wrapper')) document.querySelectorAll('.dropdown-menu').forEach(d => d.classList.remove('open')); });

// ── JOB MODULE ──
function showJobView(id) {
  document.querySelectorAll('.job-view').forEach(v => v.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('main-content').scrollTop = 0;
}
function toggleJobAdv() {
  const f = document.getElementById('j-adv-filters');
  const ic = document.getElementById('j-adv-icon');
  f.classList.toggle('open');
  ic.textContent = f.classList.contains('open') ? '−' : '+';
}
function showJobDetail(title,company,code,type,location,func,contract,start,lang) {
  document.getElementById('jd-title').textContent = title;
  document.getElementById('jd-company').textContent = company;
  document.getElementById('jd-f-title').textContent = title;
  document.getElementById('jd-f-loc').textContent = location;
  document.getElementById('jd-f-func').textContent = func;
  document.getElementById('jd-f-type').textContent = type;
  document.getElementById('jd-f-contract').textContent = contract;
  document.getElementById('jd-f-start').textContent = start;
  document.getElementById('jd-f-lang').textContent = lang;
  var logo = document.getElementById('jd-logo');
  if(logo) {
    logo.textContent = code || company.slice(0,2).toUpperCase();
    var colors = ['#7B6FD0','#5B5EA6','#9B8FE8','#4A90D9','#2ECC8A'];
    logo.style.background = colors[company.charCodeAt(0) % colors.length];
  }
  var locsub = document.getElementById('jd-loc-sub');
  if(locsub) locsub.textContent = '📍 ' + location;
  showJobView('jv-detail');
}

// ── SEARCH MODULE ──
function showSearchView(id) {
  document.querySelectorAll('.search-view').forEach(v => v.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('main-content').scrollTop = 0;
}
function switchSearchTab(tab) {
  var tabOrder = ['material','component','manufacturer','packaging','expert','brand'];
  document.querySelectorAll('.tab-btn').forEach(function(b,i) {
    b.classList.toggle('active', tabOrder[i]===tab);
  });
  var titles = { manufacturer:'MANUFACTURER SEARCH', material:'MATERIAL SEARCH', component:'COMPONENT SEARCH', packaging:'PACKAGING SEARCH', expert:'EXPERT / FREELANCER SEARCH', brand:'BRAND SEARCH' };
  var counts = { manufacturer:'248 Manufacturers Found', material:'1,842 Materials Found', component:'634 Components Found', packaging:'318 Suppliers Found', expert:'312 Experts & Freelancers', brand:'4,600 Brands Registered' };
  document.getElementById('s-page-title').textContent = titles[tab] || tab.toUpperCase()+' SEARCH';
  document.getElementById('s-results-count').textContent = counts[tab] || '';
  var container = document.getElementById('s-cards-container');
  if(tab==='expert') { container.className='freelance-grid2'; container.innerHTML=expertCards(); }
  else if(tab==='brand') { container.className='sup-cards-grid'; container.innerHTML=brandCards(); }
  else if(tab==='packaging') { container.className='sup-cards-grid'; container.innerHTML=packagingCards(); }
  else if(tab==='component') { container.className='sup-cards-grid'; container.innerHTML=componentCards(); }
  else { container.className='sup-cards-grid'; container.innerHTML=supplierCards(); }
}
function supplierCards() {
  return [
    ['YL','Yongli Textiles','Guangzhou, China','photo-1558769132-cb1aea458c5e','Woven Fabrics','Knitwear','GOTS','200','18','4.8★',true,true],
    ['MPM','MPM Textiles','Istanbul, Turkey','photo-1489987707025-afc232f7ea0f','Denim','Outerwear','ISO 9001','500','12','4.5★',false,true],
    ['AT','Atelier Tessile','Como, Italy','photo-1556905055-8f358a7a47b2','Silk','Luxury Fabrics','B Corp','50','35','4.9★',true,true],
    ['JX','Jin Zhi Xiang','Hangzhou, China','photo-1516762689617-e1cffcef479d','Accessories','Leather','SA8000','100','22','4.6★',false,true],
    ['MK','Malaika Crafts','Casablanca, Morocco','photo-1503342217505-b0a15ec3261c','Embroidery','Handcraft','Fair Trade','30','8','4.7★',true,false],
    ['LC','Lidzcaps Mfg','Porto, Portugal','photo-1434389677669-e08b4cac3105','Headwear','Caps','OEKO-TEX','150','15','4.4★',false,true],
  ].map(([code,name,loc,img,t1,t2,cert,moq,yrs,rating,sust,verif]) => `
    <div class="supplier-card" onclick="showSearchView('sv-profile')">
      <div class="card-cover"><img src="https://images.unsplash.com/${img}?w=400&h=140&fit=crop" alt=""><div class="card-cover-overlay"></div>
      <div class="card-badges">${sust?'<span class="badge badge-green">Sustainable</span>':''}${verif?'<span class="badge badge-purple">Verified</span>':''}</div>
      <div class="card-logo-sm">${code}</div></div>
      <div class="card-body"><div class="card-name">${name}</div><div class="card-location">📍 ${loc}</div>
      <div class="card-tags-row"><span class="card-tag">${t1}</span><span class="card-tag">${t2}</span><span class="card-tag green">${cert}</span></div>
      <div class="card-stats"><div class="card-stat"><div class="stat-value">${moq}</div><div class="stat-label">MOQ</div></div><div class="card-stat"><div class="stat-value">${yrs}</div><div class="stat-label">Years</div></div><div class="card-stat"><div class="stat-value">${rating}</div><div class="stat-label">Rating</div></div></div>
      </div></div>`).join('');
}
function expertCards() {
  return [
    ['https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop','Sophie Laurent','Senior Fashion Designer — Womenswear','RTW','Knitwear','Luxury','green','Available Now · Paris','€850/day'],
    ['https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop','Marco Ricci','Technical Sourcing Manager','Sourcing','Italy','QC','green','Available in 2 weeks · Milan','€950/day'],
    ['https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=100&h=100&fit=crop','Aisha Ndoye','Textile & Materials Expert','Sustainable','Africa','Fabrics','green','Available Now · Dakar','€600/day'],
    ['https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?w=100&h=100&fit=crop','James Chen','Production Liaison — China','China','Production','QA','red','Unavailable until May · Shanghai','$700/day'],
  ].map(([img,name,role,t1,t2,t3,avail,loc,rate]) => `
    <div class="freelance-card">
      <div class="freelance-avatar"><img src="${img}" alt=""></div>
      <div style="flex:1"><div class="freelance-name">${name}</div><div class="freelance-title-role">${role}</div>
      <div style="display:flex;gap:4px;flex-wrap:wrap;margin-bottom:6px"><span class="card-tag">${t1}</span><span class="card-tag">${t2}</span><span class="card-tag">${t3}</span></div>
      <div style="display:flex;align-items:center;justify-content:space-between"><div style="font-size:9.5px;color:var(--gray-400)"><span class="avail-dot ${avail}"></span>${loc}</div><div class="freelance-rate">${rate}</div></div>
      </div></div>`).join('');
}
function brandCards() {
  return [
    ['Girault Roy','Luxury — Paris','photo-1469334031218-e382a71b716b','Womenswear','Accessories','$320M','48','22'],
    ['Hometown Athletics','Sportswear — London','photo-1483985988355-763728e1935b','Activewear','Sustainable','$85M','18','12'],
    ['Malaika Studio','Contemporary — Casablanca','photo-1445205170230-053b83016050','RTW','Ethical','$12M','8','6'],
    ['ACL Mode','Fast Fashion — Barcelona','photo-1529139574466-a303027c1d8b','Volume','Basics','$220M','62','30'],
    ['Jumbo Fashion','Premium — Amsterdam','photo-1515886657613-9f3515b0c78f','Womenswear','Menswear','$145M','35','18'],
    ['Lidzcaps Brand','Accessories — Porto','photo-1487222477894-8943e31ef7b2','Headwear','Streetwear','$28M','12','9'],
  ].map(([name,seg,img,t1,t2,rev,sup,cntry]) => `
    <div class="brand-card">
      <div class="brand-cover"><img src="https://images.unsplash.com/${img}?w=400&h=100&fit=crop" alt=""></div>
      <div class="brand-body"><div class="brand-name">${name}</div><div class="brand-segment">${seg}</div>
      <div style="display:flex;gap:4px;flex-wrap:wrap;margin-bottom:8px"><span class="card-tag">${t1}</span><span class="card-tag">${t2}</span></div>
      <div class="brand-stats-row">
        <div><div class="brand-stat-val">${rev}</div><div class="brand-stat-lbl">Revenue</div></div>
        <div><div class="brand-stat-val">${sup}</div><div class="brand-stat-lbl">Suppliers</div></div>
        <div><div class="brand-stat-val">${cntry}</div><div class="brand-stat-lbl">Countries</div></div>
      </div></div></div>`).join('');
}
function switchPtab(tab) {
  document.querySelectorAll('.ptab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.profile-tab-content').forEach(c => c.classList.remove('active'));
  const tabs=['overview','catalog','machines','clients','financial','sustainability'];
  const idx=tabs.indexOf(tab);
  if(idx>=0){document.querySelectorAll('.ptab')[idx].classList.add('active');document.getElementById('ptab-'+tab).classList.add('active');}
}

// ── STOCK MODULE ──
const stockProducts = [
  {name:'Fil de fibre 100% aloe vera sur cône, pour tricot à la machine',seller:'Yongli Textiles',av:'YL',price:'8,50 €',stock:'2 400 kg',moq:'50 kg',ship:'✓ Livraison gratuite à partir de 500 kg',social:'',img:'https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=600&h=600&fit=crop&sat=-80',specs:[['Fibre','100% Aloe Vera'],['Titre','Nm 34/2'],['Conditionnement','Cône 500g'],['Couleur','Naturel écru'],['Certification','OEKO-TEX 100'],['Lot disponible','2 400 kg']]},
  {name:'Fil de lin 100% sur le cône, 1 kg, naturel non traité',seller:'Atelier Tessile',av:'AT',price:'5,00 €',stock:'5 200 kg',moq:'100 kg',ship:'Livraison selon destination',social:'',img:'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=600&h=600&fit=crop',specs:[['Fibre','100% Lin'],['Titre','Nm 18/1'],['Couleur','Naturel brut'],['Certification','GOTS'],['Lot disponible','5 200 kg']]},
  {name:'100% fil de soie tussah sur cône, qualité luxe',seller:'Jin Zhi Xiang',av:'JX',price:'9,80 €',stock:'340 kg',moq:'20 kg',ship:'✓ Livraison gratuite incluse',social:'',img:'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=600&h=600&fit=crop',specs:[['Fibre','100% Soie Tussah'],['Titre','Nm 60/2'],['Couleur','Doré naturel'],['Certification','ISO 9001'],['Lot disponible','340 kg']]},
  {name:'Fil alpaga/silk/cotton sur cône, mélange luxe',seller:'Malaika Crafts',av:'MK',price:'6,00 €',stock:'1 100 kg',moq:'50 kg',ship:'Livraison selon destination',social:'',img:'https://images.unsplash.com/photo-1605518216938-7c31b7b14ad0?w=600&h=600&fit=crop',specs:[['Fibre','50% Alpaga / 30% Soie / 20% Coton'],['Titre','Nm 28/2'],['Couleur','Gris perle'],['Certification','OEKO-TEX'],['Lot disponible','1 100 kg']]},
  {name:'Fil flou en cachemire sur cône, extra soft',seller:'Lidzcaps Mfg',av:'LC',price:'14,00 €',stock:'280 kg',moq:'20 kg',ship:'Livraison selon destination',social:'',img:'https://images.unsplash.com/photo-1619413526629-b58edba0c4f0?w=600&h=600&fit=crop',specs:[['Fibre','100% Cachemire Mongolie'],['Grade','Grade A'],['Titre','Nm 48/2'],['Couleur','Beige naturel'],['Certification','GOTS'],['Lot disponible','280 kg']]},
  {name:'Fil 100% laine mérinos sur cône, premium superwash',seller:'Yongli Textiles',av:'YL',price:'61,00 €',stock:'150 kg',moq:'10 kg',ship:'✓ Livraison gratuite incluse',social:'',img:'https://images.unsplash.com/photo-1598527520472-1b86e5edd6cb?w=600&h=600&fit=crop',specs:[['Fibre','100% Laine Mérinos'],['Microns','18.5µ Superwash'],['Titre','Nm 32/2'],['Couleur','Blanc'],['Certification','ZQ Merino, OEKO-TEX'],['Lot disponible','150 kg']]},
  {name:'Fils de soie de mûrier 100% sur cône, grade A',seller:'Jin Zhi Xiang',av:'JX',price:'8,00 €',stock:'960 kg',moq:'30 kg',ship:'Livraison selon destination',social:'5 personnes font leur panier.',img:'https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=600&h=600&fit=crop',specs:[['Fibre','100% Soie de Mûrier'],['Grade','Grade A'],['Titre','Nm 120/2'],['Couleur','Blanc naturel'],['Certification','OEKO-TEX 100'],['Lot disponible','960 kg']]},
  {name:'Fil cachemire et soie, rouge carmin, lot unique 380 kg',seller:'Lidzcaps Mfg',av:'LC',price:'13,50 €',stock:'380 kg',moq:'20 kg',ship:'Livraison selon destination',social:'6 personnes font leur panier.',img:'https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=600&h=600&fit=crop&hue=340',specs:[['Fibre','70% Cachemire / 30% Soie'],['Titre','Nm 64/2'],['Couleur','Rouge carmin'],['Certification','OEKO-TEX'],['Lot disponible','380 kg']]},
  {name:'Fil nylon recyclé Econyl certifié GRS, marine',seller:'Yongli Textiles',av:'YL',price:'4,50 €',stock:'3 200 kg',moq:'100 kg',ship:'Livraison selon destination',social:'2 personnes font leur panier.',img:'https://images.unsplash.com/photo-1605518216938-7c31b7b14ad0?w=600&h=600&fit=crop&hue=280',specs:[['Fibre','100% Nylon Recyclé Econyl'],['Titre','Nm 70/2'],['Couleur','Marine'],['Certification','GRS, OEKO-TEX'],['Lot disponible','3 200 kg']]},
  {name:'Fil mohair kid luxe, 70% kid mohair 30% soie, bleu ciel',seller:'Atelier Tessile',av:'AT',price:'22,00 €',stock:'190 kg',moq:'10 kg',ship:'✓ Livraison gratuite incluse',social:'',img:'https://images.unsplash.com/photo-1619413526629-b58edba0c4f0?w=600&h=600&fit=crop&hue=60',specs:[['Fibre','70% Kid Mohair / 30% Soie'],['Titre','Nm 25/2 Halo'],['Couleur','Bleu ciel'],['Certification','OEKO-TEX'],['Lot disponible','190 kg']]},
  {name:'Fil coton mercerisé 100%, Nm 50/2, lustre soyeux, écru',seller:'MPM Textiles',av:'MPM',price:'3,80 €',stock:'8 500 kg',moq:'200 kg',ship:'Livraison selon destination',social:'11 personnes font leur panier.',img:'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=600&h=600&fit=crop&hue=220',specs:[['Fibre','100% Coton Égyptien Mercerisé'],['Titre','Nm 50/2'],['Couleur','Écru'],['Certification','GOTS, OEKO-TEX'],['Lot disponible','8 500 kg']]},
  {name:'Fil bambou/soie sur cône, mélange 70/30 brillant naturel',seller:'Yongli Textiles',av:'YL',price:'7,20 €',stock:'200 kg',moq:'30 kg',ship:'Livraison selon destination',social:'',img:'https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=600&h=600&fit=crop&hue=120',specs:[['Fibre','70% Bambou / 30% Soie'],['Titre','Nm 50/2'],['Couleur','Blanc nacre'],['Certification','OEKO-TEX 100'],['Lot disponible','200 kg']]},
];

function showStockDetail(idx) {
  const p = stockProducts[idx];
  document.getElementById('st-main-img').src = p.img;
  document.getElementById('st-seller').textContent = p.seller;
  document.getElementById('st-name').textContent = p.name;
  document.getElementById('st-stock').textContent = p.stock;
  document.getElementById('st-price').textContent = p.price;
  document.getElementById('st-shipping').textContent = p.ship;
  document.getElementById('st-social').textContent = p.social;
  document.getElementById('st-moq').textContent = p.moq;
  document.getElementById('st-s-avatar').textContent = p.av;
  document.getElementById('st-s-name').textContent = p.seller+' Co., Ltd.';
  document.getElementById('st-specs').innerHTML = p.specs.map(([l,v])=>`<div class="spec-row"><span class="spec-label">${l}</span><span class="spec-value">${v}</span></div>`).join('');
  const thumbs = document.getElementById('st-thumbs');
  thumbs.innerHTML = [p.img,p.img,p.img,p.img].map((s,i)=>`<img class="detail-thumb ${i===0?'active':''}" src="${s}" onclick="switchThumb(this,'${s}')" alt="">`).join('');
  showStockView('stv-detail');
}
function showStockView(id) {
  document.querySelectorAll('.stock-view').forEach(v => v.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('main-content').scrollTop = 0;
}
function switchThumb(el,src) {
  document.querySelectorAll('.detail-thumb').forEach(t=>t.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('st-main-img').src=src;
}
function stQty(d){const i=document.getElementById('st-qty');i.value=Math.max(10,parseInt(i.value)+d);}
function addCart(){cartCount++;document.getElementById('cart-count').textContent=cartCount;const b=document.querySelector('.btn-cart');b.textContent='✓ Ajouté !';b.style.background='var(--green)';setTimeout(()=>{b.textContent='🛒 Ajouter au panier';b.style.background='';},2000);}
function toggleStockAdv(){const f=document.getElementById('st-adv-filters');const ic=document.getElementById('st-adv-icon');const open=f.style.display==='none';f.style.display=open?'block':'none';ic.textContent=open?'−':'+';}
function setCat(el){document.querySelectorAll('.cat-pill').forEach(p=>{p.classList.remove('active');});el.classList.add('active');}


// ── MAPPING MODULE ──
var leafletMap = null;
var mapLoaded = false;

function initLeafletMap() {
  if (mapLoaded) return;
  mapLoaded = true;
  if (!document.querySelector('link[href*="leaflet"]')) {
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
    document.head.appendChild(link);
  }
  if (typeof L !== 'undefined') { buildMap(); return; }
  var script = document.createElement('script');
  script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
  script.onload = function() { buildMap(); setTimeout(tryInitDashMap, 200); };
  document.head.appendChild(script);
}

function buildMap() {
  var mapDiv = document.getElementById('leaflet-map');
  if (!mapDiv) return;
  mapDiv.style.width = '100%';
  mapDiv.style.height = '100%';

  leafletMap = L.map('leaflet-map', {
    zoomControl: true, attributionControl: false, center: [25, 15], zoom: 2
  });

  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png', {
    subdomains: 'abcd', maxZoom: 19, attribution: ''
  }).addTo(leafletMap);

  var mapContainer = leafletMap.getContainer();
  mapContainer.style.background = '#B8D8F0';
  setTimeout(function() {
    var pane = mapContainer.querySelector('.leaflet-tile-pane');
    if (pane) pane.style.mixBlendMode = 'multiply';
  }, 500);

  var suppliers = [
    { name: 'NYC Garments Inc.',  city: 'New York, USA',       lat: 40.71, lng: -74.01, tags: ['Premium','Fair Trade'] },
    { name: 'Lidzcaps Mfg',       city: 'Porto, Portugal',     lat: 41.15, lng: -8.61,  tags: ['Headwear','OEKO-TEX'] },
    { name: 'Atelier Tessile',    city: 'Como, Italy',         lat: 45.81, lng: 9.08,   tags: ['Silk','B Corp'] },
    { name: 'Malaika Crafts',     city: 'Casablanca, Morocco', lat: 33.59, lng: -7.62,  tags: ['Embroidery','Fair Trade'] },
    { name: 'MPM Textiles',       city: 'Istanbul, Turkey',    lat: 41.01, lng: 28.97,  tags: ['Denim','ISO 9001'] },
    { name: 'Sunrise Textiles',   city: 'Mumbai, India',       lat: 19.08, lng: 72.88,  tags: ['Woven','GOTS'] },
    { name: 'Dhaka Apparel Ltd',  city: 'Dhaka, Bangladesh',   lat: 23.72, lng: 90.41,  tags: ['Basics','Volume'] },
    { name: 'Yongli Textiles',    city: 'Guangzhou, China',    lat: 23.13, lng: 113.26, tags: ['Knitwear','OEKO-TEX'] },
    { name: 'Jin Zhi Xiang',      city: 'Hangzhou, China',     lat: 30.27, lng: 120.15, tags: ['Silk','Premium'] },
    { name: 'Viet Fashion Co.',   city: 'Ho Chi Minh, Vietnam',lat: 10.82, lng: 106.66, tags: ['Basics','Fair Trade'] }
  ];

  function makeIcon() {
    return L.divIcon({
      className: '',
      html: '<div style="width:28px;height:28px;background:#7B6FD0;border-radius:50% 50% 50% 0;transform:rotate(-45deg);border:2px solid white;box-shadow:0 2px 6px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center"><div style="transform:rotate(45deg);color:white;font-size:11px">📍</div></div>',
      iconSize: [28, 28], iconAnchor: [14, 28], popupAnchor: [0, -30]
    });
  }

  suppliers.forEach(function(s) {
    var marker = L.marker([s.lat, s.lng], { icon: makeIcon() }).addTo(leafletMap);
    marker.bindPopup('<div style="font-family:Archivo,sans-serif;min-width:160px"><div style="font-size:11px;font-weight:700;color:#333344;text-transform:uppercase;margin-bottom:4px">' + s.name + '</div><div style="font-size:9.5px;color:#888899;margin-bottom:8px">📍 ' + s.city + '</div><div style="display:flex;gap:4px;flex-wrap:wrap;margin-bottom:10px">' + s.tags.map(function(t){return '<span style="font-size:8px;font-weight:700;text-transform:uppercase;padding:2px 6px;border-radius:4px;background:#EEE9FF;color:#7B6FD0">' + t + '</span>';}).join('') + '</div><button style="width:100%;padding:6px;background:#7B6FD0;color:white;border:none;border-radius:6px;font-family:Archivo,sans-serif;font-size:9px;font-weight:700;letter-spacing:.08em;cursor:pointer" onclick="openMapProfile()">View Profile →</button></div>');
  });

  var style = document.createElement('style');
  style.textContent = '.leaflet-control-zoom { border:none !important; box-shadow:0 2px 8px rgba(0,0,0,.12) !important; } .leaflet-control-zoom a { background:white !important; color:#7B6FD0 !important; border:none !important; } .leaflet-control-zoom a:hover { background:#EEE9FF !important; }';
  document.head.appendChild(style);

  setTimeout(function() { if(leafletMap) leafletMap.invalidateSize(); }, 300);
}

function openMapProfile() { navigate('search'); showSearchView('sv-profile'); }
function mZoom(f) { if(leafletMap) { if(f>1) leafletMap.zoomIn(); else leafletMap.zoomOut(); } }

// ── DASHBOARD MAP ──
var dashMapLoaded = false;

function initDashMap() {
  if (dashMapLoaded) return;
  var container = document.getElementById('dash-map');
  if (!container || typeof L === 'undefined') return;
  dashMapLoaded = true;

  var dmap = L.map('dash-map', {
    zoomControl: false, attributionControl: false,
    dragging: false, scrollWheelZoom: false, doubleClickZoom: false,
    touchZoom: false, keyboard: false, center: [20, 15], zoom: 1
  });

  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png', {
    subdomains: 'abcd', maxZoom: 19, attribution: ''
  }).addTo(dmap);

  var mc = dmap.getContainer();
  mc.style.background = '#B8D8F0';
  setTimeout(function() {
    var pane = mc.querySelector('.leaflet-tile-pane');
    if (pane) pane.style.mixBlendMode = 'multiply';
  }, 500);

  var regions = [
    { name: 'Europe',     lat: 50,  lng: 15,   users: 41, color: '#5B5EA6', r: 28 },
    { name: 'N. America', lat: 45,  lng: -100, users: 38, color: '#5B5EA6', r: 26 },
    { name: 'E. Asia',    lat: 32,  lng: 115,  users: 29, color: '#5B5EA6', r: 22 },
    { name: 'S. Asia',    lat: 22,  lng: 78,   users: 18, color: '#7B6FD0', r: 18 },
    { name: 'Africa/ME',  lat: 5,   lng: 25,   users: 15, color: '#9B8FE8', r: 16 },
    { name: 'S. America', lat: -15, lng: -58,  users: 12, color: '#9B8FE8', r: 14 },
    { name: 'Russia',     lat: 60,  lng: 90,   users: 8,  color: '#BEB5F2', r: 12 },
    { name: 'Oceania',    lat: -25, lng: 133,  users: 2,  color: '#D4CCFF', r: 8  }
  ];

  regions.forEach(function(r) {
    L.circleMarker([r.lat, r.lng], {
      radius: r.r, fillColor: r.color, fillOpacity: 0.85, color: 'white', weight: 1.5
    }).addTo(dmap);
    var icon = L.divIcon({
      className: '',
      html: '<div style="font-family:Archivo,sans-serif;font-size:10px;font-weight:800;color:white;text-align:center;line-height:1.2;text-shadow:0 1px 3px rgba(0,0,0,.3)">' + r.users + '<br><span style="font-size:7px;font-weight:600;opacity:.9;letter-spacing:.04em">' + r.name + '</span></div>',
      iconSize: [60, 30], iconAnchor: [30, 15]
    });
    L.marker([r.lat, r.lng], { icon: icon, interactive: false }).addTo(dmap);
  });

  setTimeout(function() { dmap.invalidateSize(); }, 200);
}

function tryInitDashMap() {
  if (typeof L !== 'undefined') { initDashMap(); return; }
  if (!document.querySelector('script[src*="leaflet"]')) {
    if (!document.querySelector('link[href*="leaflet"]')) {
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
      document.head.appendChild(link);
    }
    var script = document.createElement('script');
    script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
    script.onload = initDashMap;
    document.head.appendChild(script);
  }
}

window.addEventListener('load', function() { setTimeout(tryInitDashMap, 300); });

// ── SHOW COMING SOON ──
function showComingSoon(name) {
  var existing = document.getElementById('cs-toast');
  if (existing) existing.remove();
  var toast = document.createElement('div');
  toast.id = 'cs-toast';
  toast.innerHTML = '🚧 <strong>' + name + '</strong> — Module coming soon';
  toast.style.cssText = 'position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:#333344;color:white;padding:10px 22px;border-radius:8px;font-family:Archivo,sans-serif;font-size:12px;z-index:9999;box-shadow:0 4px 16px rgba(0,0,0,.25);pointer-events:none';
  document.body.appendChild(toast);
  setTimeout(function() { toast.remove(); }, 2000);
}

// ── CURRENCY CONVERTER ──
var FX = { EUR:1, USD:1.085, GBP:0.856, CNY:7.82, JPY:163.5, TRY:35.2, INR:90.4, MAD:10.8 };

function convertCurrency() {
  var amount = parseFloat(document.getElementById('cc-amount').value) || 0;
  var from = document.getElementById('cc-from').value;
  var to = document.getElementById('cc-to').value;
  var result = amount / FX[from] * FX[to];
  document.getElementById('cc-result').value = result.toFixed(2);
  var rate = (FX[to] / FX[from]).toFixed(4);
  document.getElementById('cc-rate-label').textContent = '1 ' + from + ' = ' + rate + ' ' + to + '  ·  indicative rate';
}

function swapCurrencies() {
  var f = document.getElementById('cc-from');
  var t = document.getElementById('cc-to');
  var tmp = f.value; f.value = t.value; t.value = tmp;
  convertCurrency();
}

// ── LIVE COUNTER ──
function animateOnlineCount() {
  var el = document.getElementById('online-count');
  if (!el) return;
  var delta = Math.floor(Math.random() * 7) - 3;
  var cur = parseInt(el.textContent) || 143;
  el.textContent = Math.max(100, cur + delta);
}
setInterval(animateOnlineCount, 8000);

// ── TIMEZONE CLOCKS ──
var TZ_MAP = {
  'tz-paris':'Europe/Paris','tz-ny':'America/New_York',
  'tz-shanghai':'Asia/Shanghai','tz-dubai':'Asia/Dubai',
  'tz-mumbai':'Asia/Kolkata','tz-hk':'Asia/Hong_Kong'
};
function updateClocks() {
  var now = new Date();
  Object.keys(TZ_MAP).forEach(function(id) {
    var el = document.getElementById(id);
    if(!el) return;
    var t = new Intl.DateTimeFormat('fr-FR',{hour:'2-digit',minute:'2-digit',hour12:false,timeZone:TZ_MAP[id]}).format(now);
    el.textContent = t;
  });
}
setInterval(updateClocks, 10000);

// ── PACKAGING CARDS ──
function packagingCards() {
  return [
    ['PA','PackArt Studio','Milan, Italy','photo-1607082349566-187342175e2f','Luxury Boxes','Ribbon','FSC Certified','500 units','12','4.8★',true,true],
    ['EW','EcoWrap Solutions','Lyon, France','photo-1558618666-fcd25c85cd64','Recycled','Kraft','B Corp','1,000 units','8','4.6★',true,true],
    ['SP','Shenzhen PackCo','Shenzhen, China','photo-1523381210434-271e8be1f52b','Polybag','Hanger','ISO 9001','5,000 units','15','4.3★',false,true],
    ['VP','Verdant Packaging','Amsterdam, Netherlands','photo-1441986300917-64674bd600d8','Compostable','No Plastic','OEKO-TEX','2,000 units','6','4.7★',true,true],
    ['LB','LuxeBox Paris','Paris, France','photo-1512436991641-6745cdb1723f','Gift Box','Magnetic','Verified','200 units','20','4.9★',true,true],
    ['TM','TagMaster Istanbul','Istanbul, Turkey','photo-1489987707025-afc232f7ea0f','Hangtag','Barcode','ISO 9001','3,000 units','10','4.4★',false,true],
  ].map(([code,name,loc,img,t1,t2,cert,moq,yrs,rating,sust,verif]) => `
    <div class="supplier-card" onclick="showSearchView('sv-profile')">
      <div class="card-cover"><img src="https://images.unsplash.com/${img}?w=400&h=140&fit=crop" alt=""><div class="card-cover-overlay"></div>
      <div class="card-badges">${sust?'<span class="badge badge-green">Sustainable</span>':''}${verif?'<span class="badge badge-purple">Verified</span>':''}</div>
      <div class="card-logo-sm">${code}</div></div>
      <div class="card-body"><div class="card-name">${name}</div><div class="card-location">📍 ${loc}</div>
      <div class="card-tags-row"><span class="card-tag">${t1}</span><span class="card-tag">${t2}</span><span class="card-tag green">${cert}</span></div>
      <div class="card-stats"><div class="card-stat"><div class="stat-value">${moq}</div><div class="stat-label">MOQ</div></div><div class="card-stat"><div class="stat-value">${yrs}</div><div class="stat-label">Years</div></div><div class="card-stat"><div class="stat-value">${rating}</div><div class="stat-label">Rating</div></div></div>
      </div></div>`).join('');
}

// ── COMPONENT CARDS ──
function componentCards() {
  return [
    ['RR','Riri Zipper Co.','Mendrisio, Switzerland','photo-1558618666-fcd25c85cd64','Zippers','Metal','Bluesign','500 units','30','4.9★',true,true],
    ['YK','YKK Asia Pacific','Guangzhou, China','photo-1516762689617-e1cffcef479d','Zippers','Nylon','ISO 14001','5,000 units','45','4.7★',false,true],
    ['CT','Coats Thread Co.','Charlotte, USA','photo-1594938298603-c8148c4b4545','Thread','Elastic','GOTS','1,000 units','100','4.8★',true,true],
    ['BA','ButtonArt Milano','Milan, Italy','photo-1556905055-8f358a7a47b2','Buttons','Horn','Verified','200 units','40','4.9★',true,true],
    ['VI','Velcro Industries','Manchester, UK','photo-1503342217505-b0a15ec3261c','Velcro','Hook&Loop','OEKO-TEX','2,000 m','60','4.5★',false,true],
    ['KS','KoStar Interlining','Seoul, South Korea','photo-1434389677669-e08b4cac3105','Interlining','Fusible','ISO 9001','500 m','25','4.6★',false,true],
  ].map(([code,name,loc,img,t1,t2,cert,moq,yrs,rating,sust,verif]) => `
    <div class="supplier-card" onclick="showSearchView('sv-profile')">
      <div class="card-cover"><img src="https://images.unsplash.com/${img}?w=400&h=140&fit=crop" alt=""><div class="card-cover-overlay"></div>
      <div class="card-badges">${sust?'<span class="badge badge-green">Sustainable</span>':''}${verif?'<span class="badge badge-purple">Verified</span>':''}</div>
      <div class="card-logo-sm">${code}</div></div>
      <div class="card-body"><div class="card-name">${name}</div><div class="card-location">📍 ${loc}</div>
      <div class="card-tags-row"><span class="card-tag">${t1}</span><span class="card-tag">${t2}</span><span class="card-tag green">${cert}</span></div>
      <div class="card-stats"><div class="card-stat"><div class="stat-value">${moq}</div><div class="stat-label">MOQ</div></div><div class="card-stat"><div class="stat-value">${yrs}</div><div class="stat-label">Years</div></div><div class="card-stat"><div class="stat-value">${rating}</div><div class="stat-label">Rating</div></div></div>
      </div></div>`).join('');
}
// ── TREND GALLERY FILTER ──
function setTgFilter(btn) {
  document.querySelectorAll('.tg-filter').forEach(function(b) {
    b.style.background = 'white'; b.style.color = 'var(--gray-600)';
  });
  btn.style.background = 'var(--purple)'; btn.style.color = 'white';
}

// ── INIT ON LOAD ──
document.addEventListener('DOMContentLoaded', function() {
  switchSearchTab('manufacturer');
  updateClocks();
  tryInitDashMap();
  convertCurrency();
  animateOnlineCount();
});

function tgTab(btn) {
  document.querySelectorAll('#mod-trendgallery .tab-btn').forEach(function(b){ b.classList.remove('active'); });
  btn.classList.add('active');
}

// ── MAPPING ──
var mapSuppliers = [{"name": "Yongli Textiles", "city": "Guangzhou", "lat": 23.13, "lng": 113.26, "type": "Materials"}, {"name": "MPM Textiles", "city": "Istanbul", "lat": 41.01, "lng": 28.95, "type": "Manufacturer"}, {"name": "Atelier Tessile", "city": "Como", "lat": 45.81, "lng": 9.08, "type": "Materials"}, {"name": "Jin Zhi Xiang", "city": "Hangzhou", "lat": 30.25, "lng": 120.15, "type": "Manufacturer"}, {"name": "Malaika Crafts", "city": "Casablanca", "lat": 33.58, "lng": -7.59, "type": "Manufacturer"}, {"name": "LidZcaps MFG", "city": "Porto", "lat": 41.15, "lng": -8.61, "type": "Manufacturer"}, {"name": "Sunrise Textiles", "city": "Mumbai", "lat": 19.07, "lng": 72.87, "type": "Materials"}, {"name": "LuxeBox Paris", "city": "Paris", "lat": 48.85, "lng": 2.35, "type": "Packaging"}, {"name": "Riri Zipper Co.", "city": "Mendrisio", "lat": 45.86, "lng": 8.98, "type": "Components"}, {"name": "EcoThread Co.", "city": "Amsterdam", "lat": 52.37, "lng": 4.89, "type": "Materials"}, {"name": "Pacific Knit", "city": "Ho Chi Minh", "lat": 10.82, "lng": 106.62, "type": "Manufacturer"}, {"name": "Atlas Leather", "city": "Marrakech", "lat": 31.63, "lng": -7.99, "type": "Materials"}];

var typeColors = {
  "Materials": "#7B6FD0",
  "Manufacturer": "#22c55e",
  "Packaging": "#f59e0b",
  "Components": "#ef4444"
};

function latLngToXY(lat, lng) {
  // Mercator simplifié pour viewBox 1000x500
  var x = (lng + 180) / 360 * 1000;
  var y = (90 - lat) / 180 * 500;
  return {x: x, y: y};
}

function renderMapPins(suppliers) {
  var container = document.getElementById('map-pins');
  if (!container) return;
  container.innerHTML = '';
  suppliers.forEach(function(s) {
    var pos = latLngToXY(s.lat, s.lng);
    // Utiliser % directement sur le viewBox 1000x500
    var px = (pos.x / 1000 * 100).toFixed(2) + '%';
    var py = (pos.y / 500 * 100).toFixed(2) + '%';
    var color = typeColors[s.type] || '#7B6FD0';

    var pin = document.createElement('div');
    pin.style.cssText = 'position:absolute;left:' + px + ';top:' + py + ';transform:translate(-50%,-100%);cursor:pointer;pointer-events:all;transition:transform 0.15s;z-index:5;';
    pin.innerHTML = '<div style="font-size:22px;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.3));line-height:1">📍</div>' +
      '<div style="position:absolute;bottom:100%;left:50%;transform:translateX(-50%);background:' + color + ';color:white;font-size:9px;font-weight:700;padding:2px 6px;border-radius:3px;white-space:nowrap;margin-bottom:2px;opacity:0;transition:opacity 0.15s" class="pin-label">' + s.name + '</div>';

    pin.addEventListener('mouseenter', function(e) {
      pin.style.transform = 'translate(-50%,-100%) scale(1.3)';
      pin.querySelector('.pin-label').style.opacity = '1';
      var tt = document.getElementById('map-tooltip');
      tt.style.display = 'block';
      var pinRect = pin.getBoundingClientRect();
      var mapRect = container.parentElement.getBoundingClientRect();
      tt.style.left = (pinRect.left - mapRect.left + 20) + 'px';
      tt.style.top = (pinRect.top - mapRect.top - 70) + 'px';
      document.getElementById('tt-name').textContent = s.name;
      document.getElementById('tt-city').textContent = '📍 ' + s.city;
      document.getElementById('tt-type').innerHTML = '<span style="background:' + color + '20;color:' + color + ';padding:2px 8px;border-radius:4px;font-size:10px;font-weight:700">' + s.type + '</span>';
    });
    pin.addEventListener('mouseleave', function() {
      pin.style.transform = 'translate(-50%,-100%)';
      pin.querySelector('.pin-label').style.opacity = '0';
      document.getElementById('map-tooltip').style.display = 'none';
    });
    pin.addEventListener('click', function() { navigate('search'); });
    container.appendChild(pin);
  });
}

function mapFilter() {
  var cat = document.getElementById('map-filter-cat') ? document.getElementById('map-filter-cat').value : '';
  var filtered = mapSuppliers.filter(function(s) {
    return (!cat || s.type === cat);
  });
  renderMapPins(filtered);
}

function initMappingModule() {
  setTimeout(function() { renderMapPins(mapSuppliers); }, 200);
  window.addEventListener('resize', function() { renderMapPins(mapSuppliers); });
}
</script>
</body>
</html>
